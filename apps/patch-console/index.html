<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patch Console</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="./patch-console.css?v=0.15.0">
</head>
<body>
  <div class="app-shell">
    <aside class="app-sidebar panel">
      <div class="sidebar-brand">
        <div class="brand-block">
          <p class="kicker">Patch Console Admin</p>
          <h1>Local Patch Console</h1>
        </div>
        <p class="muted small">패치/SEO 운영을 위한 관리자 콘솔</p>
      </div>

      <section class="sidebar-section" aria-labelledby="view-cluster-work">
        <p id="view-cluster-work" class="sidebar-label">Patch Workflows</p>
        <nav class="sidebar-nav" role="tablist" aria-label="패치 작업 뷰">
          <button class="view-tab active" data-view="work" type="button" aria-selected="true" aria-controls="panel-work" tabindex="0">패치 작업</button>
          <button class="view-tab" data-view="ignored" type="button" aria-selected="false" aria-controls="panel-ignored" tabindex="-1">무시 목록</button>
          <button class="view-tab" data-view="editor" type="button" aria-selected="false" aria-controls="panel-editor" tabindex="-1">데이터 편집기</button>
        </nav>
      </section>

      <section class="sidebar-section" aria-labelledby="view-cluster-ops">
        <p id="view-cluster-ops" class="sidebar-label">Operations</p>
        <nav class="sidebar-nav sidebar-nav-ops" role="tablist" aria-label="운영 관리 뷰">
          <button class="view-tab" data-view="seo-admin" type="button" aria-selected="false" aria-controls="panel-seo-admin" tabindex="-1">SEO Admin</button>
          <button class="view-tab" data-view="revelation-admin" type="button" aria-selected="false" aria-controls="panel-revelation-admin" tabindex="-1">Revelation Admin</button>
        </nav>
      </section>

      <section class="sidebar-section sidebar-domain-section">
        <div class="sidebar-domain-head">
          <p class="sidebar-label">Domain</p>
          <span id="current-domain" class="sidebar-domain-current">character</span>
        </div>
        <div id="domain-tabs" class="domain-tabs sidebar-domain-tabs"></div>
      </section>
    </aside>

    <div class="app-workspace">
      <header class="app-header panel">
        <div class="header-main">
          <div class="header-title-wrap">
            <p class="kicker">Active Workspace</p>
            <h2 id="active-view-title">패치 작업</h2>
            <p id="active-view-description" class="muted small">API/로컬 diff를 조회하고 선택 반영합니다.</p>
          </div>
          <div class="header-actions">
            <button
              id="btn-header-refresh"
              class="header-refresh-btn"
              type="button"
              title="목록 · 리포트 · 무시 목록 새로고침"
              aria-label="목록 · 리포트 · 무시 목록 새로고침"
            >
              <svg class="header-refresh-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M20 12a8 8 0 0 1-13.66 5.66M4 12A8 8 0 0 1 17.66 6.34M4 4v4h4M16 16h4v4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </button>
          </div>
        </div>
      </header>

      <main class="app-main">
        <section class="panel main">
        <section id="panel-work" class="view-panel active">
          <details class="group work-controls-accordion">
            <summary>
              <span>패치 작업 컨트롤</span>
              <small>언어/범위/파트</small>
            </summary>
            <div class="work-controls-body">
              <p class="muted small">필요할 때만 펼쳐서 사용하세요. 새로고침은 상단 아이콘 하나로 처리됩니다.</p>
              <div class="control-grid">
                <div class="field">
                  <label>언어</label>
                  <input id="langs-input" type="text" value="kr,en,jp" placeholder="kr,en,jp,cn">
                </div>
                <div class="field">
                  <label>범위 모드</label>
                  <select id="scope-mode">
                    <option value="all">all</option>
                    <option value="nums">nums</option>
                    <option value="api">api</option>
                    <option value="local">local</option>
                  </select>
                </div>
                <div class="field">
                  <label>범위 값</label>
                  <input id="scope-value" type="text" placeholder="예: 3,7-9 or MESSA">
                </div>
                <div class="field">
                  <label>파트(선택)</label>
                  <div class="parts-picker" id="parts-picker">
                    <button id="parts-toggle" class="parts-toggle" type="button">전체 파트</button>
                    <div id="parts-menu" class="parts-menu hidden"></div>
                  </div>
                </div>
              </div>
            </div>
          </details>

          <section class="work-layout">
            <aside class="group work-list-panel">
              <h2>대상 목록</h2>
              <div class="field">
                <input id="list-search" type="text" placeholder="api/local/key 검색">
              </div>
              <div class="char-list" id="char-list">
                <p class="muted" style="padding:10px;">로딩 전 목록이 없습니다.</p>
              </div>
            </aside>

            <div class="work-main-panel">
              <section class="group table-section">
                <div class="table-stats" aria-label="작업 요약">
                  <p>목록 <strong id="list-count">0</strong></p>
                  <p>리포트 <strong id="report-count">0</strong></p>
                  <p>선택 행 <strong id="selected-count">0</strong></p>
                  <p>선택 Diff <strong id="selected-diff-count">0</strong></p>
                  <p>무시 규칙 활성 <strong id="ignored-active-count">0</strong> / 숨김 <strong id="ignored-hidden-count">0</strong> / 전체 <strong id="ignored-total-count">0</strong></p>
                  <p>현재 표시 무시 <strong id="ignored-count">0</strong></p>
                  <p>리포트 파일 <strong id="report-file">-</strong></p>
                </div>
                <div class="table-topbar">
                  <p class="toolbar-note muted small">테이블에서 행을 클릭하면 선택/상세가 고정됩니다.</p>
                  <div class="actions">
                    <button id="btn-select-all" class="btn ghost small">전체 선택</button>
                    <button id="btn-clear-select" class="btn ghost small">선택 해제</button>
                    <button id="btn-patch-selected" class="btn danger small">선택 행 실제 반영</button>
                    <button id="btn-ignore-selected" class="btn ghost small">선택 행 Diff 무시</button>
                  </div>
                </div>
                <div class="table-tools">
                  <input id="report-search" type="text" placeholder="리포트 검색">
                </div>
                <div class="table-wrap">
                  <table>
                    <thead>
                      <tr>
                        <th></th>
                        <th>#</th>
                        <th>Icon</th>
                        <th>Lang</th>
                        <th>API</th>
                        <th>Local</th>
                        <th>Key</th>
                        <th>Parts</th>
                        <th>Diff Preview</th>
                      </tr>
                    </thead>
                    <tbody id="report-tbody">
                      <tr><td colspan="9" class="empty">리포트 데이터가 없습니다. 조건을 선택해 주세요.</td></tr>
                    </tbody>
                  </table>
                </div>
              </section>

              <section class="group detail" id="detail-panel">
                <header class="detail-header">
                  <div class="detail-avatar" id="detail-avatar">N/A</div>
                  <div>
                    <h2>상세</h2>
                    <p id="detail-title" class="muted">행을 클릭하면 상세 내용을 볼 수 있습니다.</p>
                  </div>
                </header>
                <div id="detail-content" class="detail-content">
                  <p class="muted">선택한 행을 클릭하면 상세 정보가 표시됩니다.</p>
                </div>
              </section>

              <section class="group logs">
                <div class="log-head">
                  <h2>실행 로그</h2>
                  <button id="btn-clear-log" class="btn ghost small">로그 비우기</button>
                </div>
                <pre id="log-output"></pre>
              </section>
            </div>
          </section>
        </section>

        <section id="panel-ignored" class="view-panel hidden">
          <section class="group">
            <div class="group-head">
              <h2>무시 목록 운영</h2>
              <p class="muted small">1) 빠른 필터로 좁히고 2) 선택/필터 기준 작업을 실행하세요.</p>
            </div>
            <div class="ignored-overview" aria-label="무시 목록 요약">
              <p>활성 <strong id="ignored-active-count-ignored">0</strong></p>
              <p>숨김 <strong id="ignored-hidden-count-ignored">0</strong></p>
              <p>전체 <strong id="ignored-total-count-ignored">0</strong></p>
              <p>표시 <strong id="ignored-count-ignored">0</strong> / 총 <strong id="ignored-total-count-ignored-all">0</strong></p>
              <p>정렬 <strong id="ignored-sort-label">created_desc</strong></p>
            </div>
            <div class="ignored-toolbar-grid">
              <div class="field">
                <label>표시 범위</label>
                <select id="ignored-show" class="ignored-filter-input">
                  <option value="active">활성만</option>
                  <option value="hidden">숨김만</option>
                  <option value="all">전체</option>
                </select>
              </div>
              <div class="field">
                <label>검색</label>
                <div class="field-inline">
                  <input id="ignored-search" type="text" placeholder="무시 항목 검색">
                  <button id="btn-clear-ignored-search" class="btn ghost">초기화</button>
                </div>
              </div>
              <div class="field">
                <label>정렬</label>
                <select id="ignored-sort" class="ignored-filter-input">
                  <option value="created_desc">생성일 ↓</option>
                  <option value="created_asc">생성일 ↑</option>
                  <option value="index_desc">index ↓</option>
                  <option value="index_asc">index ↑</option>
                </select>
              </div>
            </div>
            <p class="muted small ignored-action-caption">선택 또는 필터 결과에 적용할 작업</p>
            <div class="actions ignored-actions">
              <button id="btn-unignore-filtered" class="btn warn">필터 결과 무시 해제</button>
              <button id="btn-unignore-selected" class="btn ghost">선택 무시 해제</button>
              <button id="btn-hide-selected-ignored" class="btn ghost">선택 숨김</button>
              <button id="btn-unhide-selected-ignored" class="btn ghost">선택 숨김 해제</button>
              <button id="btn-edit-ignored-note" class="btn ghost">선택 메모 편집</button>
            </div>
          </section>

          <section class="group">
            <details class="ignored-advanced">
              <summary>상세 필터 (고급)</summary>
              <p class="muted small">입력값은 즉시 적용됩니다. 필요한 항목만 사용하세요.</p>
              <div class="ignored-filter-grid">
                <input id="ignored-filter-index" class="ignored-filter-input" type="text" placeholder="index">
                <input id="ignored-filter-lang" class="ignored-filter-input" type="text" placeholder="lang (kr/en/jp...)">
                <input id="ignored-filter-api" class="ignored-filter-input" type="text" placeholder="api">
                <input id="ignored-filter-local" class="ignored-filter-input" type="text" placeholder="local">
                <input id="ignored-filter-key" class="ignored-filter-input" type="text" placeholder="key">
                <input id="ignored-filter-part" class="ignored-filter-input" type="text" placeholder="part">
                <input id="ignored-filter-path" class="ignored-filter-input" type="text" placeholder="path">
                <input id="ignored-filter-character-key" class="ignored-filter-input" type="text" placeholder="characterKey">
                <input id="ignored-filter-note" class="ignored-filter-input" type="text" placeholder="note">
                <input id="ignored-filter-created-from" class="ignored-filter-input" type="date" placeholder="created from">
                <input id="ignored-filter-created-to" class="ignored-filter-input" type="date" placeholder="created to">
              </div>
              <div class="actions" style="margin-top: 10px;">
                <button id="btn-clear-ignored-filters" class="btn ghost">상세 필터 초기화</button>
              </div>
            </details>
          </section>

          <section class="group">
            <div class="group-head">
              <h2>무시 항목</h2>
              <p class="muted small">체크박스로 여러 항목을 선택한 뒤 위 작업 버튼을 사용하세요.</p>
            </div>
            <div class="char-list ignored-list" id="ignored-list">
              <p class="muted" style="padding:10px;">저장된 무시 항목이 없습니다.</p>
            </div>
          </section>
        </section>

        <section id="panel-editor" class="view-panel hidden">
          <section class="editor-layout">
            <section class="group editor-side-panel">
              <h2>파일 탐색</h2>
              <div class="field">
                <label>루트</label>
                <select id="data-root"></select>
              </div>
              <div class="field">
                <label>파일 검색</label>
                <div class="field-inline">
                  <input id="data-file-search" type="text" placeholder="예: profile.js">
                  <button id="btn-load-data-files" class="btn ghost">조회</button>
                </div>
              </div>
              <div class="field">
                <label>파일 목록</label>
                <div class="data-file-list" id="data-file-list">
                  <p class="muted" style="padding:10px;">먼저 조회하세요.</p>
                </div>
              </div>
            </section>

            <div class="editor-main-panel">
              <section class="group">
                <h2>데이터 편집기</h2>
                <div class="field">
                  <label>현재 파일</label>
                  <div class="field-inline">
                    <input id="data-file-path" type="text" readonly>
                    <button id="btn-load-data-file" class="btn ghost">로드</button>
                    <button id="btn-reload-data-file" class="btn ghost">새로고침</button>
                  </div>
                </div>
                <div class="field">
                  <label>편집 방식</label>
                  <div class="data-editor-mode-switch">
                    <button id="btn-data-mode-form" class="btn ghost small active" type="button" data-mode="form">GUI 편집</button>
                    <button id="btn-data-mode-raw" class="btn ghost small" type="button" data-mode="raw">원문 편집</button>
                  </div>
                  <div id="data-editor-meta" class="muted small">파일을 선택하면 편집 가능합니다.</div>
                  <p id="data-editor-status" class="muted small">선택된 항목: 없음</p>
                  <div id="data-editor-form-wrap" class="data-editor-form-wrap hidden">
                    <div id="data-editor-entry-info" class="muted small"></div>
                    <select id="data-editor-entry-select" class="hidden"></select>
                    <div id="data-editor-form" class="data-editor-form"></div>
                  </div>
                  <div id="data-editor-raw-wrap">
                    <textarea id="data-editor" spellcheck="false" placeholder="파일 내용을 불러오면 수정 가능합니다."></textarea>
                  </div>
                  <button id="btn-save-data-file" class="btn primary">저장</button>
                </div>
              </section>

              <section class="group" id="add-character-group">
                <h2>캐릭터 추가</h2>
                <div class="add-character-grid">
                  <div class="field">
                    <label>API 이름</label>
                    <input id="new-api" type="text" placeholder="예: aigis">
                  </div>
                  <div class="field">
                    <label>LOCAL 이름</label>
                    <input id="new-local" type="text" placeholder="예: AIGIS">
                  </div>
                  <div class="field">
                    <label>Character Key</label>
                    <input id="new-key" type="text" placeholder="예: 에이기스">
                  </div>
                </div>
                <button id="btn-add-character" class="btn primary">신규 캐릭터 생성</button>
                <p class="muted small">codename.json에 { api, local, key }가 있어야 생성 가능합니다.</p>
              </section>

              <section class="group hidden" id="add-revelation-group">
                <h2>계시 추가</h2>
                <div class="add-revelation-grid add-revelation-grid-main">
                  <div class="field">
                    <label>Kind</label>
                    <select id="new-revelation-kind">
                      <option value="sub">sub</option>
                      <option value="main">main</option>
                    </select>
                  </div>
                  <div class="field">
                    <label>KR</label>
                    <input id="new-revelation-kr" type="text" placeholder="예: 신규 계시">
                  </div>
                  <div class="field">
                    <label>EN</label>
                    <input id="new-revelation-en" type="text" placeholder="e.g. New Revelation">
                  </div>
                  <div class="field">
                    <label>JP</label>
                    <input id="new-revelation-jp" type="text" placeholder="例: 新規啓示">
                  </div>
                  <div class="field">
                    <label>CN</label>
                    <input id="new-revelation-cn" type="text" placeholder="例如: 新启示">
                  </div>
                  <div class="field">
                    <label>Type Tags (CSV)</label>
                    <input id="new-revelation-types" type="text" placeholder="버프,화염">
                  </div>
                  <label class="field checkbox-field">
                    <span>EN/JP 미출시 태그</span>
                    <input id="new-revelation-unreleased" type="checkbox">
                  </label>
                </div>

                <details class="revelation-subtext-wrap">
                  <summary>sub 계시 set2/set4 텍스트 (선택)</summary>
                  <div class="add-revelation-grid add-revelation-grid-sub">
                    <div class="field">
                      <label>KR set2</label>
                      <textarea id="new-revelation-set2-kr" rows="2" placeholder="KR 2세트 효과"></textarea>
                    </div>
                    <div class="field">
                      <label>KR set4</label>
                      <textarea id="new-revelation-set4-kr" rows="2" placeholder="KR 4세트 효과"></textarea>
                    </div>
                    <div class="field">
                      <label>EN set2</label>
                      <textarea id="new-revelation-set2-en" rows="2" placeholder="EN 2-set effect"></textarea>
                    </div>
                    <div class="field">
                      <label>EN set4</label>
                      <textarea id="new-revelation-set4-en" rows="2" placeholder="EN 4-set effect"></textarea>
                    </div>
                    <div class="field">
                      <label>JP set2</label>
                      <textarea id="new-revelation-set2-jp" rows="2" placeholder="JP 2セット効果"></textarea>
                    </div>
                    <div class="field">
                      <label>JP set4</label>
                      <textarea id="new-revelation-set4-jp" rows="2" placeholder="JP 4セット効果"></textarea>
                    </div>
                    <div class="field">
                      <label>CN set2</label>
                      <textarea id="new-revelation-set2-cn" rows="2" placeholder="CN 2件套效果"></textarea>
                    </div>
                    <div class="field">
                      <label>CN set4</label>
                      <textarea id="new-revelation-set4-cn" rows="2" placeholder="CN 4件套效果"></textarea>
                    </div>
                  </div>
                </details>

                <button id="btn-add-revelation" class="btn primary">신규 계시 생성</button>
                <p class="muted small">EN/JP 미출시 태그는 동시에 반영됩니다. CN은 KR과 같은 출시 기준으로 미출시 태그를 사용하지 않습니다.</p>
              </section>
            </div>
          </section>
        </section>

        <section id="panel-seo-admin" class="view-panel hidden seo-admin-view">
          <section class="group seo-admin-hero">
            <div class="seo-admin-head">
              <div>
                <h2>SEO Admin</h2>
                <p class="muted small">도메인별 제목/설명/출시여부 통합 관리</p>
              </div>
              <div class="seo-stat-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
                <article class="seo-stat-card">
                  <span>Domain</span>
                  <strong id="seo-stat-domain">-</strong>
                </article>
                <article class="seo-stat-card">
                  <span>Rows</span>
                  <strong id="seo-stat-rows">0</strong>
                </article>
                <article class="seo-stat-card">
                  <span>Changed</span>
                  <strong id="seo-stat-dirty">0</strong>
                </article>
              </div>
            </div>

            <div id="seo-domain-list" class="seo-domain-list"></div>

            <div class="seo-toolbar">
              <div class="field">
                <label>Scope Filter</label>
                <input id="seo-scope-filter" type="text" placeholder="scope / placeholder 검색">
              </div>
              <label class="field checkbox-field">
                <span>CN 컬럼 표시</span>
                <input id="seo-toggle-cn" type="checkbox">
              </label>
            </div>
            <div class="seo-action-bar">
              <div class="seo-action-group">
                <span class="seo-action-group-label">데이터</span>
                <button id="btn-seo-load" class="btn ghost">도메인 로드</button>
              </div>
              <div class="seo-action-group">
                <span class="seo-action-group-label">일괄편집</span>
                <button id="btn-seo-copy-kr" class="btn ghost" title="KR 언어의 Title/Description을 EN·JP에 동일하게 복사합니다">KR 내용을 EN·JP에 복사</button>
                <button id="btn-seo-insert-name" class="btn ghost">{name} 삽입</button>
                <button id="btn-seo-insert-path" class="btn ghost">{path} 삽입</button>
                <button id="btn-seo-batch-suffix" class="btn ghost" title="모든 Title/Description 끝에 공통 텍스트를 추가합니다">접미사 일괄 추가</button>
                <button id="btn-seo-batch-released" class="btn ghost" title="표시된 모든 행의 Released 상태를 한 번에 ON/OFF 합니다">Released 일괄 변경</button>
              </div>
              <div class="seo-action-group">
                <span class="seo-action-group-label">저장</span>
                <button id="btn-seo-validate" class="btn warn">검증</button>
                <button id="btn-seo-save" class="btn primary">저장</button>
              </div>
            </div>
            <div class="seo-status-row">
              <p id="seo-status" class="seo-status-item muted small">SEO 도메인을 선택하세요.</p>
              <p id="seo-validation" class="seo-status-item muted small">검증 결과 없음</p>
              <p id="seo-ci-status" class="seo-status-item muted small">CI 상태 없음</p>
            </div>
          </section>

          <section class="seo-admin-main">
            <div class="group-head" style="margin-bottom:10px;">
              <h2>SEO Matrix Editor</h2>
              <p id="seo-visible-count" class="muted small">표시 0 / 전체 0</p>
            </div>
            <div class="seo-matrix-wrap">
              <div id="seo-matrix-body" class="seo-scope-card-list">
                <p class="muted" style="padding:10px;">도메인을 로드하세요.</p>
              </div>
            </div>
          </section>

          <details class="group seo-details-panel">
            <summary>운영 가이드</summary>
            <ul class="seo-help-list">
              <li>`detail`/템플릿 스코프는 `{name}` 토큰을 유지하세요.</li>
              <li>`maps.detail` 계열은 `{path}` 토큰이 필요합니다.</li>
              <li>저장 전 `검증`으로 누락 토큰을 먼저 차단하세요.</li>
              <li>`Ctrl + S`(또는 `Cmd + S`)로 저장할 수 있습니다.</li>
            </ul>
          </details>

          <details class="group seo-details-panel">
            <summary>
              <span>SEO 저장 이력</span>
              <button id="btn-seo-refresh-history" class="btn ghost small seo-details-action" type="button">새로고침</button>
            </summary>
            <div id="seo-history-list" class="seo-history-list">
              <p class="muted" style="padding:10px;">아직 저장 이력이 없습니다.</p>
            </div>
          </details>
        </section>

        <section id="panel-revelation-admin" class="view-panel hidden">
          <section class="revelation-admin-layout">
            <aside class="group revelation-admin-list-panel">
              <div class="group-head">
                <h2>Revelation Cards</h2>
                <p class="muted small">Card list + quick filters</p>
              </div>
              <div class="field">
                <label>Search</label>
                <input id="rev-admin-search" type="text" placeholder="KR/EN/JP/CN name, KR key">
              </div>
              <div class="revelation-admin-filter-row">
                <div class="field">
                  <label>Kind</label>
                  <select id="rev-admin-kind-filter">
                    <option value="all">all</option>
                    <option value="main">main</option>
                    <option value="sub">sub</option>
                  </select>
                </div>
                <div class="field">
                  <label>Unreleased</label>
                  <select id="rev-admin-unreleased-filter">
                    <option value="all">all</option>
                    <option value="yes">yes</option>
                    <option value="no">no</option>
                  </select>
                </div>
              </div>
              <div class="actions revelation-admin-list-actions">
                <button id="btn-rev-admin-refresh" class="btn ghost">Refresh</button>
                <button id="btn-rev-admin-new-toggle" class="btn primary">New Card</button>
              </div>
              <div class="revelation-admin-card-list" id="rev-admin-card-list">
                <p class="muted" style="padding:10px;">Select revelation domain to load cards.</p>
              </div>
            </aside>

            <div class="revelation-admin-main-panel">
              <section class="group" id="rev-admin-empty">
                <h2>Revelation Admin</h2>
                <p class="muted">Pick a card from the list to edit details.</p>
              </section>

              <section class="group hidden" id="rev-admin-detail">
                <div class="group-head">
                  <h2>Card Detail</h2>
                  <p id="rev-admin-dirty-state" class="muted small">saved</p>
                </div>

                <div class="revelation-admin-hero">
                  <div id="rev-admin-card-icon" class="revelation-admin-hero-icon">N/A</div>
                  <div class="revelation-admin-hero-copy">
                    <p class="muted small">현재 카드</p>
                    <h3 id="rev-admin-card-title">-</h3>
                    <p id="rev-admin-card-subtitle" class="muted small">-</p>
                  </div>
                </div>

                <div class="revelation-admin-meta">
                  <span id="rev-admin-card-id">-</span>
                  <span id="rev-admin-card-kind">-</span>
                </div>

                <div class="revelation-admin-grid names-grid">
                  <div class="field revelation-inline-field revelation-inline-field-kr">
                    <label>KR</label>
                    <div class="field-inline">
                      <input id="rev-admin-name-kr" type="text" readonly>
                      <button id="btn-rev-admin-rename-kr" class="btn ghost" type="button">Rename KR</button>
                    </div>
                  </div>
                  <div class="field revelation-inline-field">
                    <label>EN</label>
                    <input id="rev-admin-name-en" type="text">
                  </div>
                  <div class="field revelation-inline-field">
                    <label>JP</label>
                    <input id="rev-admin-name-jp" type="text">
                  </div>
                  <div class="field revelation-inline-field">
                    <label>CN</label>
                    <input id="rev-admin-name-cn" type="text">
                  </div>
                </div>

                <div class="revelation-admin-grid common-grid">
                  <div class="field revelation-inline-field">
                    <label>Type Tags (CSV)</label>
                    <input id="rev-admin-types" type="text" placeholder="버프,화염">
                  </div>
                  <label class="field checkbox-field">
                    <span>EN/JP unreleased</span>
                    <input id="rev-admin-unreleased" type="checkbox">
                  </label>
                </div>

                <section id="rev-admin-main-fields" class="revelation-admin-branch hidden">
                  <h3>Main Relations</h3>
                  <div id="rev-admin-main-sub-options" class="revelation-admin-sub-options"></div>
                  <h3>Main Effects By Sub</h3>
                  <div id="rev-admin-main-effects" class="revelation-admin-main-effects"></div>
                </section>

                <section id="rev-admin-sub-fields" class="revelation-admin-branch hidden">
                  <h3>Related Main (read-only)</h3>
                  <div id="rev-admin-sub-main-refs" class="revelation-admin-chip-list"></div>
                  <h3>Sub Effects</h3>
                  <div class="revelation-admin-grid sub-effects-grid">
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set2 KR</label>
                      <textarea id="rev-admin-sub-set2-kr" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set4 KR</label>
                      <textarea id="rev-admin-sub-set4-kr" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set2 EN</label>
                      <textarea id="rev-admin-sub-set2-en" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set4 EN</label>
                      <textarea id="rev-admin-sub-set4-en" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set2 JP</label>
                      <textarea id="rev-admin-sub-set2-jp" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set4 JP</label>
                      <textarea id="rev-admin-sub-set4-jp" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set2 CN</label>
                      <textarea id="rev-admin-sub-set2-cn" rows="2"></textarea>
                    </div>
                    <div class="field revelation-inline-field revelation-inline-field-textarea">
                      <label>set4 CN</label>
                      <textarea id="rev-admin-sub-set4-cn" rows="2"></textarea>
                    </div>
                  </div>
                </section>

                <div class="actions">
                  <button id="btn-rev-admin-save" class="btn primary">Save Card</button>
                  <button id="btn-rev-admin-reset" class="btn ghost">Reset Draft</button>
                </div>
              </section>

              <section class="group hidden" id="rev-admin-create">
                <div class="group-head">
                  <h2>Create Card</h2>
                  <p class="muted small">Create main/sub card with localized names</p>
                </div>

                <div class="revelation-admin-grid create-top-grid">
                  <div class="field">
                    <label>Kind</label>
                    <select id="rev-admin-create-kind">
                      <option value="sub">sub</option>
                      <option value="main">main</option>
                    </select>
                  </div>
                  <div class="field">
                    <label>KR</label>
                    <input id="rev-admin-create-name-kr" type="text">
                  </div>
                  <div class="field">
                    <label>EN</label>
                    <input id="rev-admin-create-name-en" type="text">
                  </div>
                  <div class="field">
                    <label>JP</label>
                    <input id="rev-admin-create-name-jp" type="text">
                  </div>
                  <div class="field">
                    <label>CN</label>
                    <input id="rev-admin-create-name-cn" type="text">
                  </div>
                  <div class="field">
                    <label>Type Tags (CSV)</label>
                    <input id="rev-admin-create-types" type="text" placeholder="버프,화염">
                  </div>
                  <label class="field checkbox-field">
                    <span>EN/JP unreleased</span>
                    <input id="rev-admin-create-unreleased" type="checkbox">
                  </label>
                </div>

                <section id="rev-admin-create-main-fields" class="revelation-admin-branch hidden">
                  <h3>Initial Sub Relations</h3>
                  <div id="rev-admin-create-main-sub-options" class="revelation-admin-sub-options"></div>
                  <h3>Main Effects By Sub</h3>
                  <div id="rev-admin-create-main-effects" class="revelation-admin-main-effects"></div>
                </section>

                <section id="rev-admin-create-sub-fields" class="revelation-admin-branch">
                  <h3>Sub Effects</h3>
                  <div class="revelation-admin-grid sub-effects-grid">
                    <div class="field">
                      <label>set2 KR</label>
                      <textarea id="rev-admin-create-sub-set2-kr" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set4 KR</label>
                      <textarea id="rev-admin-create-sub-set4-kr" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set2 EN</label>
                      <textarea id="rev-admin-create-sub-set2-en" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set4 EN</label>
                      <textarea id="rev-admin-create-sub-set4-en" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set2 JP</label>
                      <textarea id="rev-admin-create-sub-set2-jp" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set4 JP</label>
                      <textarea id="rev-admin-create-sub-set4-jp" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set2 CN</label>
                      <textarea id="rev-admin-create-sub-set2-cn" rows="2"></textarea>
                    </div>
                    <div class="field">
                      <label>set4 CN</label>
                      <textarea id="rev-admin-create-sub-set4-cn" rows="2"></textarea>
                    </div>
                  </div>
                </section>

                <div class="actions">
                  <button id="btn-rev-admin-create-submit" class="btn primary">Create Card</button>
                  <button id="btn-rev-admin-create-cancel" class="btn ghost">Cancel</button>
                </div>
              </section>
            </div>
          </section>
        </section>
        </section>
      </main>
    </div>
  </div>
  <script src="./patch-console.js?v=0.15.0"></script>
</body>
</html>
