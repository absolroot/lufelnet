---
layout: default
custom_css: [home, tactic-posts]
custom_js: [tactic-posts-home, tactic-preview, /tactic/share, home/popular-characters]
custom_data: [/characters/characters.js]
permalink: /
redirect_from:
- /kr/
- /kr/index.html
language: kr
title: í˜ë¥´ì†Œë‚˜5 ë” íŒ¬í…€ X ë£¨í˜ë¥´ë„·
description: í˜ë¥´ì†Œë‚˜5 ë” íŒ¬í…€ X ê³µëµ ì‚¬ì´íŠ¸. ê´´ë„ ìœ¡ì„±, í˜ë¥´ì†Œë‚˜, ê³„ì‹œ, ì „ìˆ  ì‹œë®¬ë ˆì´í„° ë“± ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
alternate_urls:
en: /?lang=en
jp: /?lang=jp
---

{% if page.alternate_urls %}
<link rel="alternate" hreflang="ko" href="{{ site.url }}/" />
{% for lang in page.alternate_urls %}
<link rel="alternate" hreflang="{{ lang[0] }}" href="{{ site.url }}{{ lang[1] }}" />
{% endfor %}
<link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
{% endif %}

{% include supabase-config.html %}

<style>
    .header-container .language-selector-container {
        max-width: 120px;
        margin: 0 0 4px 4px;
        padding: 0;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border: none;
        /* ì¶”ê°€ */
    }

    .header-container .language-selector-container .options-container {
        top: 100%;
        /* ìƒë‹¨ì—ì„œ 100% ìœ„ì¹˜ì— ë°°ì¹˜ (ì•„ë˜ë¡œ) */
        bottom: auto;
        /* ê¸°ì¡´ bottom ì†ì„± ì œê±° */
        margin-top: 5px;
        /* ì„ íƒê¸°ì™€ì˜ ê°„ê²© */
    }

    /* Quick Grid styles moved to assets/js/home/quick-grid.js */
</style>


<div class="main-wrapper">
    <!-- ì–¸ì–´ ì•ˆë‚´ ë©”ì‹œì§€ -->
    <div id="language-notice" class="language-notice" style="display: none;">
        <p id="language-notice-text"></p>
    </div>

    <!-- Header (logo, etc.) -->
    <div class="header-container">
        <h1 id="site-title">P5X ë£¨í˜ë¥´ë„·</h1> <span class="beta-text"></span>
        <div class="language-selector-container">
            <div class="custom-select">
                <div class="selected-option">
                    <img src="{{ site.baseurl }}/assets/img/flags/kr.png" alt="kr" class="flag-icon">
                    <span>í•œêµ­ì–´</span>
                </div>
                <div class="options-container">
                    <div class="option ${currentLang === 'kr' ? 'selected' : ''}" data-value="kr" role="button"
                        tabindex="0" onclick="return false;">
                        <img src="{{ site.baseurl }}/assets/img/flags/kr.png" alt="kr" class="flag-icon">
                        <span>í•œêµ­ì–´</span>
                    </div>

                    <div class="option ${currentLang === 'en' ? 'selected' : ''}" data-value="en" role="button"
                        tabindex="0" onclick="return false;">
                        <img src="{{ site.baseurl }}/assets/img/flags/en.png" alt="en" class="flag-icon">
                        <span>English</span>
                    </div>
                    <div class="option ${currentLang === 'jp' ? 'selected' : ''}" data-value="jp" role="button"
                        tabindex="0" onclick="return false;">
                        <img src="{{ site.baseurl }}/assets/img/flags/jp.png" alt="jp" class="flag-icon">
                        <span>æ—¥æœ¬èª</span>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Carousel: inserted above menu-cards -->
    <div id="home-carousel-root" style="width: 100%;"></div>

    <!--<div class="separator-line"></div>-->
    <!-- Main content -->
    <div class="main-content">
        <!-- Quick Launcher Grid -->
        <div class="quick-grid" id="quick-grid"></div>
        <div class="update-notice"></div>
    </div>
    <div class="separator-line"></div>
    <div class="popular-content" data-max-count="10">
        <div class="posts-header">
            <h2><a href="/character/" style="text-decoration: none; color: inherit;" id="popular-characters-title">ì¸ê¸°
                    ê´´ë„</a></h2>
            <a href="/character/" class="show-more-characters-btn" style="text-decoration: none; color: inherit;"
                id="show-more-characters-btn"><img src="{{ site.baseurl }}/assets/img/home/news_more2.png" alt="logo"
                    style="
                max-height: 11px; opacity: 0.75;
            "></a>
        </div>
        <div class="character-cards" id="popular-character-cards"></div>
    </div>
    <!-- Guild Bosses Section -->
    <div id="home-bosses-root"></div>
    <div class="separator-line"></div>
    <div class="guides-container">
        <h2 id="guides-title">ê°€ì´ë“œ</h2>
        <div class="guide-cards">
            <div class="guide-card">
                <div class="guide-card-header">
                    <img src="{{ site.baseurl }}/assets/img/home/guide1.png" alt="ê°€ì´ë“œ ì´ë¯¸ì§€">
                    <h3 id="guide-city-title">ë„ì‹œ ìƒí™œ</h3>
                </div>
                <div class="guide-card-content">
                    <div class="article"><a
                            href="https://docs.google.com/spreadsheets/d/1L47W0r5nHpAlU_qUY3HuslcqBRS78tHC682eFCXiftM"
                            target="_blank" style="text-decoration: none; color: inherit;">âˆ˜ í˜‘ë ¥ì ì„ ë¬¼ & ì„ íƒì§€</a></div>
                    <div class="article"><a
                            href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=158597"
                            target="_blank" style="text-decoration: none; color: inherit;">âˆ˜ í˜‘ë ¥ì ìš°ì„ ìˆœìœ„ ì¶”ì²œ</a></div>
                    <div class="article"><a href="https://gall.dcinside.com/m/persona5phantomx/191138" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ ì´ì¹˜ê°€ì•¼ ë‚šì‹œ</a></div>
                    <div class="article"><a href="https://arca.live/b/persona5x/110240842" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ ìš”ë¦¬ ë ˆì‹œí”¼ íšë“</a></div>
                </div>
            </div>
            <div class="guide-card">
                <div class="guide-card-header">
                    <img src="{{ site.baseurl }}/assets/img/home/guide2.png" alt="ê°€ì´ë“œ ì´ë¯¸ì§€">
                    <h3 id="guide-growth-title">ìœ¡ì„± ë° ì¬í™”</h3>
                </div>
                <div class="guide-card-content">
                    <div class="article"><a
                            href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=170601"
                            target="_blank" style="text-decoration: none; color: inherit;">âˆ˜ ê³„ì‹œì— ëŒ€í•˜ì—¬</a></div>
                    <div class="article"><a href="https://arca.live/b/persona5x/115843217" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ ì£¼ ì„±ìœ„ ê³„ì‹œ ì…ìˆ˜ì²˜</a></div>
                    <div class="article"><a
                            href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=175353"
                            target="_blank" style="text-decoration: none; color: inherit;">âˆ˜ êµí™˜ìƒì  êµ¬ë§¤ëª©ë¡</a></div>
                    <div class="article"><a href="https://lufel.net/pay-calc" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ íŒ¨í‚¤ì§€ ê³¼ê¸ˆíš¨ìœ¨ ê³„ì‚°</a></div>
                </div>
            </div>
            <div class="guide-card">
                <div class="guide-card-header">
                    <img src="{{ site.baseurl }}/assets/img/home/guide3.png" alt="ê°€ì´ë“œ ì´ë¯¸ì§€">
                    <h3 id="guide-battle-title">ì „íˆ¬ ë° íŒ°ë¦¬ìŠ¤</h3>
                </div>
                <div class="guide-card-content">
                    <div class="article"><a href="https://www.bilibili.com/video/BV1xF4m1N7bZ" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ íŒ°ë¦¬ìŠ¤ 1ì¥ 100% íƒìƒ‰ë„</a></div>
                    <div class="article"><a href="https://www.bilibili.com/video/BV1zD421n7jJ" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ íŒ°ë¦¬ìŠ¤ 2ì¥ 100% íƒìƒ‰ë„</a></div>
                    <div class="article"><a href="https://www.bilibili.com/video/BV1kr421T7Wp" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ íŒ°ë¦¬ìŠ¤ 3ì¥ 100% íƒìƒ‰ë„</a></div>
                    <div class="article"><a href="https://www.bilibili.com/video/BV1duUSYfEdY" target="_blank"
                            style="text-decoration: none; color: inherit;">âˆ˜ íŒ°ë¦¬ìŠ¤ 4ì¥ 100% íƒìƒ‰ë„</a></div>
                </div>
            </div>
        </div>
    </div>

    <div class="posts-container" id="posts-container">
        <div class="posts-header">
            <h2><a href="./tactic/tactics" style="text-decoration: none; color: inherit;" id="tactic-workshop-title">íƒí‹±
                    ë„ì„œê´€ NEW</a></h2>
            <a href="./tactic/tactics" class="show-more-posts-btn" style="text-decoration: none; color: inherit;"
                id="show-more-posts-btn"><img src="{{ site.baseurl }}/assets/img/home/news_more2.png" alt="logo" style="
                max-height: 11px; opacity: 0.75;
            "></a>
        </div>
        <div class="posts-list" id="postsList"></div>
    </div>

    <!-- ê´‘ê³  -->
    <!--
    <div class="ads-container responsive-padding">
        <ins class="adsbygoogle"
        style="display:block"
        data-ad-format="fluid"
        data-ad-layout-key="-gc+3n+7a-ag-4h"
        data-ad-client="ca-pub-5862324369257695"
        data-ad-slot="5373524213"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>-->

    <!--ê´‘ê³ -->
    <!--    
    <div id="ad-unit-bottom" class="AD-bottom" style="width:100%; margin-top: 32px; text-align: center; align-items: center; display: flex; justify-content: center;"> 
    <ins class="adsbygoogle"
        style="display:inline-block;width:970px;height:90px"
        data-ad-client="ca-pub-5862324369257695"
        data-ad-slot="9244892982"></ins>
    </div>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <div style="height: 20px;"></div>
    
    <style>
        @media (max-width: 1440px) {
            .AD-bottom {
                display: none !important;
            }
        }
        @media (min-width: 1440px) {
            .ads-container {
                display: none !important;
            }
        }
        .responsive-padding { margin: 20px 20px 20px 0; padding: 0 0; }
        @media (max-width: 1200px) { .responsive-padding {margin: 20px 0 0px 0; padding: 0; } }
    </style>
    -->
</div>
</div>

<!-- Support Modal Styles for Mobile Centering -->
<style>
    @media (max-width: 768px) {

        #supportModalJP .modal-content,
        #supportModalKR .modal-content,
        #kakaoPayModalHome .modal-content {
            margin: 0 !important;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    }
</style>

<!-- Support Modal for JP -->
<div id="supportModalJP" class="modal"
    style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content"
        style="background-color: #2a2a2a; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 8px; color: white;">
        <span class="close-button" onclick="document.getElementById('supportModalJP').style.display='none'"
            style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
        <h3 style="margin-top: 0; margin-bottom: 20px; text-align: center;">ã‚µãƒãƒ¼ãƒˆ</h3>
        <div style="display: flex; flex-direction: column; gap: 15px;">
            <a href="https://absolroot.fanbox.cc/plans" target="_blank" style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    background-color: #F5F5F5;
                    color: #333;
                    text-decoration: none;
                    font-weight: bold;
                    padding: 15px;
                    border-radius: 8px;
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                <img src="https://img.icons8.com/color/48/pixiv.png" alt="pixiv" style="width: 32px; height: 32px;">
                <span style="font-size: 1.1em;">pixivFANBOXã§æ”¯æ´ã™ã‚‹</span>
            </a>

            <a href="https://ko-fi.com/S6S11F0PUN" target="_blank" style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    background-color: #72a4f2;
                    color: white;
                    text-decoration: none;
                    font-weight: bold;
                    padding: 15px;
                    border-radius: 8px;
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                <img src="https://storage.ko-fi.com/cdn/cup-border.png" alt="Ko-fi" style="width: 32px; height: auto;">
                <span style="font-size: 1.1em;">Ko-fiã§æ”¯æ´ã™ã‚‹</span>
            </a>
        </div>
    </div>
</div>

<!-- Support Modal for KR -->
<div id="supportModalKR" class="modal"
    style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content"
        style="background-color: #2a2a2a; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 8px; color: white;">
        <span class="close-button" onclick="document.getElementById('supportModalKR').style.display='none'"
            style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
        <h3 style="margin-top: 0; margin-bottom: 20px; text-align: center;">ì„œí¬íŠ¸</h3>
        <!-- <p style="text-align: center; margin-bottom: 20px; word-break: keep-all;">
            ë£¨í˜ë¥´ë„·ì€ ì—¬ëŸ¬ë¶„ì˜ í›„ì›ìœ¼ë¡œë§Œ ìš´ì˜ë©ë‹ˆë‹¤.<br> 
        </p>-->
        <div style="display: flex; flex-direction: column; gap: 15px;">
            <!-- KakaoPay Button -->
            <button
                onclick="document.getElementById('supportModalKR').style.display='none'; document.getElementById('kakaoPayModalHome').style.display='block';"
                style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    background-color: #ffeb00;
                    color: #000;
                    border: none;
                    font-weight: bold;
                    padding: 15px;
                    border-radius: 8px;
                    cursor: pointer;
                    width: 100%;
                    font-size: 1rem;
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                <img src="{{ site.baseurl }}/assets/img/logo/kakaopay-logo.png" alt="kakaopay"
                    style="height: 24px; vertical-align: middle;">
                <span>ì¹´ì¹´ì˜¤í˜ì´</span>
            </button>

            <!-- Ko-fi Button -->
            <a href="https://ko-fi.com/S6S11F0PUN" target="_blank" style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    background-color: #72a4f2;
                    color: white;
                    text-decoration: none;
                    font-weight: bold;
                    padding: 15px;
                    border-radius: 8px;
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                <img src="https://storage.ko-fi.com/cdn/cup-border.png" alt="Ko-fi" style="width: 32px; height: auto;">
                <span style="font-size: 1.1em;">Support me on Ko-fi</span>
            </a>
        </div>
    </div>
</div>

<!-- KakaoPay QR Modal (Home) -->
<div id="kakaoPayModalHome" class="modal"
    style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content"
        style="background-color: #2a2a2a; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 400px; border-radius: 8px; color: white; text-align: center;">
        <span class="close-button" onclick="document.getElementById('kakaoPayModalHome').style.display='none'"
            style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
        <h3 style="margin-top: 0; margin-bottom: 20px;">KakaoPay QR</h3>
        <div style="background: white; padding: 20px; border-radius: 8px; display: inline-block;">
            <img src="{{ site.baseurl }}/assets/img/logo/kakaopay.png" alt="ì¹´ì¹´ì˜¤í˜ì´ QR"
                style="width: 100%; max-width: 250px; height: auto;">
        </div>
        <p style="margin-top: 15px; color: #ccc; font-size: 0.9em;">
            ìŠ¤ë§ˆíŠ¸í° ì¹´ë©”ë¼ ë˜ëŠ” ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìŠ¤ìº”í•´ì£¼ì„¸ìš”.
        </p>
    </div>
</div>

<!-- Carousel JS -->
<script src="{{ site.baseurl }}/assets/js/home/carousel.js?v={{ site.time | date: '%s' }}"></script>
<!-- Tooltip (for affix hover) -->
<script src="{{ site.baseurl }}/assets/js/tooltip.js?v={{ site.time | date: '%s' }}"></script>
<!-- Bosses JS -->
<script src="{{ site.baseurl }}/assets/js/home/bosses.js?v={{ site.time | date: '%s' }}"></script>
<!-- SOS JS -->
<script src="{{ site.baseurl }}/assets/js/home/sos.js?v={{ site.time | date: '%s' }}"></script>
<!-- Quick Grid JS -->
<script src="{{ site.baseurl }}/assets/js/home/quick-grid.js?v={{ site.time | date: '%s' }}"></script>
<link rel="stylesheet" href="{{ site.baseurl }}/assets/js/home/carousel.css?v={{ site.time | date: '%s' }}">


<script>

    // ë‹¤êµ­ì–´ ë°ì´í„° ë¡œë“œ
    window.i18nData = null;


    // ì˜¤ë²„ë ˆì´ ì¶”ê°€ í•¨ìˆ˜
    function addComingSoonOverlay(cardId, text) {
        const card = document.getElementById(cardId);
        if (!card) return;

        // ì´ë¯¸ ì˜¤ë²„ë ˆì´ê°€ ìˆìœ¼ë©´ ì œê±°
        const existingOverlay = card.querySelector('.coming-soon-overlay');
        if (existingOverlay) {
            existingOverlay.remove();
        }

        // ì¹´ë“œë¥¼ ìƒëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •
        card.style.position = 'relative';

        // ì˜¤ë²„ë ˆì´ ìƒì„±
        const overlay = document.createElement('div');
        overlay.className = 'coming-soon-overlay';
        overlay.style.cssText = `
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            z-index: 10;
            border-radius: inherit;
            cursor: not-allowed;
        `;
        overlay.textContent = text;

        // ë§í¬ ë¹„í™œì„±í™”
        const link = card.querySelector('a');
        if (link) {
            link.style.pointerEvents = 'none';
        }

        card.appendChild(overlay);
    }

    // ì˜¤ë²„ë ˆì´ ì œê±° í•¨ìˆ˜
    function removeComingSoonOverlay(cardId) {
        const card = document.getElementById(cardId);
        if (!card) return;

        // ì˜¤ë²„ë ˆì´ ì œê±°
        const overlay = card.querySelector('.coming-soon-overlay');
        if (overlay) {
            overlay.remove();
        }

        // ë§í¬ í™œì„±í™”
        const link = card.querySelector('a');
        if (link) {
            link.style.pointerEvents = 'auto';
        }
    }

    // ëª¨ë“  ë§í¬ì— ì–¸ì–´ íŒŒë¼ë¯¸í„° ì¶”ê°€ í•¨ìˆ˜
    function updateLinksWithLanguage(currentLang) {
        // ë©”ë‰´ ì¹´ë“œ ë§í¬ë“¤ ì—…ë°ì´íŠ¸
        const menuLinks = [
            { selector: '.menu-card a[href*="./character/"]', path: './character/' },
            { selector: '.menu-card a[href*="./persona/"]', path: './persona/' },
            { selector: '.menu-card a[href*="./revelations/"]', path: './revelations/' },
            { selector: '.menu-card a[href*="./tactic"]', path: './tactic/tactics' }
        ];

        menuLinks.forEach(linkInfo => {
            const link = document.querySelector(linkInfo.selector);
            if (link) {
                const url = new URL(linkInfo.path + `?lang=${currentLang}&v=${APP_VERSION}`, window.location.origin);
                link.href = url.pathname + url.search;
            }
        });

        // ì¸ê¸° ìºë¦­í„° ë§í¬ë“¤ ì—…ë°ì´íŠ¸
        const characterLinks = document.querySelectorAll('.character-card-img a[href*="/character/character.html"]');
        characterLinks.forEach(link => {
            const url = new URL(link.href);
            url.searchParams.set('lang', currentLang);
            link.href = url.pathname + url.search;
        });

        // íƒí‹± ë„ì„œê´€ ë§í¬ë“¤ ì—…ë°ì´íŠ¸ (í™ˆ ëª©ë¡ ì´ë™ ë²„íŠ¼)
        const tacticLinks = document.querySelectorAll('a[href*="./tactic/tactics"]');
        tacticLinks.forEach(link => {
            const url = new URL('./tactic/tactics' + `?lang=${currentLang}&v=${APP_VERSION}`, window.location.origin);
            link.href = url.pathname + url.search;
        });

        // ê³¼ê¸ˆíš¨ìœ¨ ê³„ì‚° ë§í¬ ì—…ë°ì´íŠ¸
        const payCalcLink = document.querySelector('a[href*="https://lufel.net/pay-calc"]');
        if (payCalcLink) {
            payCalcLink.href = `https://lufel.net/pay-calc/?lang=${currentLang}&v=${APP_VERSION}`;
        }
    }

    async function loadI18nData() {
        if (window.i18nData) return window.i18nData;

        try {
            // ë‹¤êµ­ì–´ ë°ì´í„°ë¥¼ ì§ì ‘ ì •ì˜ (Jekyllì—ì„œ ë¹Œë“œ ì‹œ ìƒì„±)
            window.i18nData = {
                kr: {
                    language_notice: "",
                    site_title: "P5X ë£¨í˜ë¥´ë„·",
                    menu_character: "ìºë¦­í„°",
                    menu_persona: "í˜ë¥´ì†Œë‚˜",
                    menu_revelations: "ê³„ì‹œ",
                    menu_tactic: "íƒí‹±",
                    menu_character_desc_desktop: "ë³´ë‹¤ ë†’ì€ ì ìˆ˜, ë³´ë‹¤ ì‰¬ìš´ í´ë¦¬ì–´ë¥¼ ìœ„í•œ<br>ê´´ë„ë³„ ìœ¡ì„± ì „ëµì„ ë§Œë‚˜ë³´ì„¸ìš”",
                    menu_character_desc_mobile: "ê´´ë„ë³„ ìœ¡ì„± ì „ëµì„ ë§Œë‚˜ë³´ì„¸ìš”",
                    menu_persona_desc_desktop: "í•µì‹¬ í˜ë¥´ì†Œë‚˜ ì¶”ì²œê³¼ ë”ë¶ˆì–´<br>ê° í˜ë¥´ì†Œë‚˜ì— ì–´ìš¸ë¦¬ëŠ” ìŠ¤í‚¬ ì„¸íŒ…ê¹Œì§€",
                    menu_persona_desc_mobile: "í•µì‹¬ í˜ë¥´ì†Œë‚˜ ì¶”ì²œê³¼ ìŠ¤í‚¬ ì„¸íŒ…ê¹Œì§€",
                    menu_revelations_desc_desktop: "ê³„ì‹œ ì •ë³´ë“¤ì„ í•œ ëˆˆì—!<br>ì†ì„±ë³„, ì¼ì›”ì„±ì§„ë³„ ì›í•˜ëŠ” ëŒ€ë¡œ ë§¤ì¹­",
                    menu_revelations_desc_mobile: "ê³„ì‹œ ì •ë³´ë“¤ì„ í•œ ëˆˆì—!",
                    menu_tactic_desc_desktop: "ë³¸ì¸ë§Œì˜ íƒí‹±ì„ ë§Œë“¤ê³  ê³µìœ í•˜ê³ ,<br>ë°”ë‹¤ì™€ í‰ëª½ì—ì„œ ë†’ì€ ì ìˆ˜ë¥¼ ìŸì·¨í•˜ì„¸ìš”",
                    menu_tactic_desc_mobile: "ë³¸ì¸ë§Œì˜ íƒí‹±ì„ ë§Œë“¤ê³  ê³µìœ í•˜ì„¸ìš”",
                    menu_goto: "ë°”ë¡œê°€ê¸°",
                    popular_characters: "ì¸ê¸° ê´´ë„",
                    recent_updates: "ìµœì‹  ì—…ë°ì´íŠ¸",
                    guides: "ê°€ì´ë“œ",
                    guide_city: "ë„ì‹œ ìƒí™œ",
                    guide_growth: "ìœ¡ì„± ë° ì¬í™”",
                    guide_battle: "ì „íˆ¬ ë° íŒ°ë¦¬ìŠ¤",
                    tactic_workshop: "íƒí‹± ë„ì„œê´€",
                    show_more: "ë”ë³´ê¸°"
                },
                en: {
                    language_notice: "{{ site.data.i18n.en.language_notice | default: 'ğŸŒ English translation is in progress. Some content may still be in Korean.' }}",
                    site_title: "{{ site.data.i18n.en.site_title | default: 'P5X Lufelnet' }}",
                    menu_character: "{{ site.data.i18n.en.menu_character | default: 'Characters' }}",
                    menu_persona: "{{ site.data.i18n.en.menu_persona | default: 'Personas' }}",
                    menu_revelations: "{{ site.data.i18n.en.menu_revelations | default: 'Revelations' }}",
                    menu_tactic: "{{ site.data.i18n.en.menu_tactic | default: 'Tactics' }}",
                    menu_article: "{{ site.data.i18n.en.menu_article | default: 'Guides' }}",
                    menu_tier: "{{ site.data.i18n.en.menu_tier | default: 'Tiers' }}",
                    menu_character_desc_desktop: "{{ site.data.i18n.en.menu_character_desc_desktop | default: 'Meet character development strategies<br>for higher scores and easier clears' }}",
                    menu_character_desc_mobile: "{{ site.data.i18n.en.menu_character_desc_mobile | default: 'Meet character development strategies' }}",
                    menu_persona_desc_desktop: "{{ site.data.i18n.en.menu_persona_desc_desktop | default: 'Core persona recommendations<br>and skill settings for each persona' }}",
                    menu_persona_desc_mobile: "{{ site.data.i18n.en.menu_persona_desc_mobile | default: 'Core persona recommendations and skill settings' }}",
                    menu_revelations_desc_desktop: "{{ site.data.i18n.en.menu_revelations_desc_desktop | default: 'All revelation information at a glance!<br>Match by element and sun/moon/star as desired' }}",
                    menu_revelations_desc_mobile: "{{ site.data.i18n.en.menu_revelations_desc_mobile | default: 'All revelation information at a glance!' }}",
                    menu_tactic_desc_desktop: "{{ site.data.i18n.en.menu_tactic_desc_desktop | default: 'Create and share your own tactics,<br>achieve high scores in sea and nightmare' }}",
                    menu_tactic_desc_mobile: "{{ site.data.i18n.en.menu_tactic_desc_mobile | default: 'Create and share your own tactics' }}",
                    menu_article_desc_desktop: "{{ site.data.i18n.en.menu_article_desc_desktop | default: 'Compiled information that the game doesn&#39;t tell you.' }}",
                    menu_article_desc_mobile: "{{ site.data.i18n.en.menu_article_desc_mobile | default: 'Compiled information that the game doesn&#39;t tell you.' }}",
                    menu_tier_desc_desktop: "{{ site.data.i18n.en.menu_tier_desc_desktop | default: 'Try building your Phantom Thieves based on the tier list.' }}",
                    menu_tier_desc_mobile: "{{ site.data.i18n.en.menu_tier_desc_mobile | default: 'Building your Phantom Thieves by the tier list.' }}",
                    menu_goto: "{{ site.data.i18n.en.menu_goto | default: 'Go to' }}",
                    popular_characters: "{{ site.data.i18n.en.popular_characters | default: 'Popular Characters' }}",
                    recent_updates: "{{ site.data.i18n.en.recent_updates | default: 'Recent Updates' }}",
                    guides: "{{ site.data.i18n.en.guides | default: 'Guides' }}",
                    guide_city: "{{ site.data.i18n.en.guide_city | default: 'City Life' }}",
                    guide_growth: "{{ site.data.i18n.en.guide_growth | default: 'Growth & Resources' }}",
                    guide_battle: "{{ site.data.i18n.en.guide_battle | default: 'Battle & Palace' }}",
                    tactic_workshop: "{{ site.data.i18n.en.tactic_workshop | default: 'Tactic Library' }}",
                    show_more: "{{ site.data.i18n.en.show_more | default: 'Show More' }}"
                },
                jp: {
                    language_notice: "{{ site.data.i18n.jp.language_notice | default: 'ğŸŒ æ—¥æœ¬èªç¿»è¨³ã¯é€²è¡Œä¸­ã§ã™ã€‚ä¸€éƒ¨ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯éŸ“å›½èªã®ã¾ã¾ã®å ´åˆãŒã‚ã‚Šã¾ã™ã€‚' }}",
                    site_title: "{{ site.data.i18n.jp.site_title | default: 'P5X Lufelnet' }}",
                    menu_character: "{{ site.data.i18n.jp.menu_character | default: 'æ€ªç›—' }}",
                    menu_persona: "{{ site.data.i18n.jp.menu_persona | default: 'ãƒšãƒ«ã‚½ãƒŠ' }}",
                    menu_revelations: "{{ site.data.i18n.jp.menu_revelations | default: 'å•“ç¤º' }}",
                    menu_tactic: "{{ site.data.i18n.jp.menu_tactic | default: 'ã‚¿ã‚¯ãƒ†ã‚£ã‚¯ã‚¹' }}",
                    menu_article: "{{ site.data.i18n.jp.menu_article | default: 'ã‚¬ã‚¤ãƒ‰' }}",
                    menu_tier: "{{ site.data.i18n.jp.menu_tier | default: 'ãƒ†ã‚£ã‚¢' }}",
                    menu_character_desc_desktop: "{{ site.data.i18n.jp.menu_character_desc_desktop | default: 'ã‚ˆã‚Šé«˜ã„ã‚¹ã‚³ã‚¢ã€ã‚ˆã‚Šç°¡å˜ãªã‚¯ãƒªã‚¢ã®ãŸã‚ã®<br>æ€ªç›—åˆ¥è‚²æˆæˆ¦ç•¥ã‚’ã”ç´¹ä»‹ã—ã¾ã™' }}",
                    menu_character_desc_mobile: "{{ site.data.i18n.jp.menu_character_desc_mobile | default: 'æ€ªç›—åˆ¥è‚²æˆæˆ¦ç•¥ã‚’ã”ç´¹ä»‹ã—ã¾ã™' }}",
                    menu_persona_desc_desktop: "{{ site.data.i18n.jp.menu_persona_desc_desktop | default: 'ã‚³ã‚¢ãƒšãƒ«ã‚½ãƒŠæ¨è–¦ã¨å…±ã«<br>å„ãƒšãƒ«ã‚½ãƒŠã«åˆã†ã‚¹ã‚­ãƒ«è¨­å®šã¾ã§' }}",
                    menu_persona_desc_mobile: "{{ site.data.i18n.jp.menu_persona_desc_mobile | default: 'ã‚³ã‚¢ãƒšãƒ«ã‚½ãƒŠæ¨è–¦ã¨ã‚¹ã‚­ãƒ«è¨­å®šã¾ã§' }}",
                    menu_revelations_desc_desktop: "{{ site.data.i18n.jp.menu_revelations_desc_desktop | default: 'å•“ç¤ºæƒ…å ±ã‚’ä¸€ç›®ã§ï¼<br>å±æ€§åˆ¥ã€æ—­æœˆæ˜Ÿå¤©åˆ¥ã«ãŠå¥½ã¿ã«åˆã‚ã›ã¦ãƒãƒƒãƒãƒ³ã‚°' }}",
                    menu_revelations_desc_mobile: "{{ site.data.i18n.jp.menu_revelations_desc_mobile | default: 'å•“ç¤ºæƒ…å ±ã‚’ä¸€ç›®ã§ï¼' }}",
                    menu_tactic_desc_desktop: "{{ site.data.i18n.jp.menu_tactic_desc_desktop | default: 'è‡ªåˆ†ã ã‘ã®ã‚¿ã‚¯ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä½œæˆãƒ»å…±æœ‰ã—ã€<br>æµ·ã¨æ‚ªå¤¢ã§é«˜ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†' }}",
                    menu_tactic_desc_mobile: "{{ site.data.i18n.jp.menu_tactic_desc_mobile | default: 'è‡ªåˆ†ã ã‘ã®ã‚¿ã‚¯ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä½œæˆãƒ»å…±æœ‰ã—ã¾ã—ã‚‡ã†' }}",
                    menu_article_desc_desktop: "{{ site.data.i18n.jp.menu_article_desc_desktop | default: 'ã‚²ãƒ¼ãƒ å†…ã§èª¬æ˜ã•ã‚Œãªã„æƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚' }}",
                    menu_article_desc_mobile: "{{ site.data.i18n.jp.menu_article_desc_mobile | default: 'ã‚²ãƒ¼ãƒ å†…ã§èª¬æ˜ã•ã‚Œãªã„æƒ…å ±ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚' }}",
                    menu_tier_desc_desktop: "{{ site.data.i18n.jp.menu_tier_desc_desktop | default: 'ãƒ†ã‚£ã‚¢è¡¨ã‚’å‚è€ƒã«ã—ã¦æ€ªç›—ã‚’è‚²æˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚' }}",
                    menu_tier_desc_mobile: "{{ site.data.i18n.jp.menu_tier_desc_mobile | default: 'ãƒ†ã‚£ã‚¢è¡¨ã‚’å‚è€ƒã«ã—ã¦æ€ªç›—ã‚’è‚²æˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚' }}",
                    menu_goto: "{{ site.data.i18n.jp.menu_goto | default: 'ç§»å‹•' }}",
                    popular_characters: "{{ site.data.i18n.jp.popular_characters | default: 'äººæ°—æ€ªç›—' }}",
                    recent_updates: "{{ site.data.i18n.jp.recent_updates | default: 'æœ€æ–°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ' }}",
                    guides: "{{ site.data.i18n.jp.guides | default: 'ã‚¬ã‚¤ãƒ‰' }}",
                    guide_city: "{{ site.data.i18n.jp.guide_city | default: 'éƒ½å¸‚ç”Ÿæ´»' }}",
                    guide_growth: "{{ site.data.i18n.jp.guide_growth | default: 'è‚²æˆãƒ»è³‡æº' }}",
                    guide_battle: "{{ site.data.i18n.jp.guide_battle | default: 'æˆ¦é—˜ãƒ»ãƒ‘ãƒ¬ã‚¹' }}",
                    tactic_workshop: "{{ site.data.i18n.jp.tactic_workshop | default: 'ã‚¿ã‚¯ãƒ†ã‚£ã‚¯ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼' }}",
                    show_more: "{{ site.data.i18n.jp.show_more | default: 'ã‚‚ã£ã¨è¦‹ã‚‹' }}"
                }
            };

            return window.i18nData;
        } catch (error) {
            console.error('Failed to load i18n data:', error);
            return null;
        }
    }

    // ë‹¤êµ­ì–´ ì§€ì› í•¨ìˆ˜
    async function updateLanguageContent() {
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì§ì ‘ ì–¸ì–´ í™•ì¸ (ìš°ì„ ìˆœìœ„)
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');

        let currentLang = 'kr'; // ê¸°ë³¸ê°’

        if (urlLang && ['kr', 'en', 'jp', 'cn'].includes(urlLang)) {
            currentLang = urlLang;
        } else if (typeof LanguageRouter !== 'undefined') {
            currentLang = LanguageRouter.getCurrentLanguage();
        } else {
            // localStorageì—ì„œ í™•ì¸
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && ['kr', 'en', 'jp', 'cn'].includes(savedLang)) {
                currentLang = savedLang;
            }
        }

        //console.log('ğŸŒ í˜„ì¬ ì–¸ì–´ ì„¤ì •:', currentLang);

        // ë‹¤êµ­ì–´ ë°ì´í„° ë¡œë“œ
        await loadI18nData();
        const i18n = window.i18nData;

        if (!i18n || !i18n[currentLang]) return;

        const data = i18n[currentLang];

        // ì–¸ì–´ ì•ˆë‚´ ë©”ì‹œì§€
        /*
        if (currentLang !== 'kr') {
            const notice = document.getElementById('language-notice');
            const noticeText = document.getElementById('language-notice-text');
            if (notice && noticeText && data.language_notice) {
                noticeText.textContent = data.language_notice;
                notice.style.display = 'block';
            }
        }*/

        // ì‚¬ì´íŠ¸ ì œëª©
        const siteTitle = document.getElementById('site-title');
        if (siteTitle && data.site_title) {
            siteTitle.textContent = data.site_title;
        }

        // ë©”ë‰´ ì¹´ë“œ ì œëª©ë“¤
        const menuTitles = {
            'menu-character-title': data.menu_character,
            'menu-persona-title': data.menu_persona,
            'menu-revelations-title': data.menu_revelations,
            'menu-tactic-title': data.menu_tactic,
            'menu-article-title': data.menu_article,
            'menu-tier-title': data.menu_tier
        };

        Object.keys(menuTitles).forEach(id => {
            const element = document.getElementById(id);
            if (element && menuTitles[id]) {
                const icon = element.querySelector('img');
                element.textContent = menuTitles[id] + ' ';
                if (icon) element.appendChild(icon);
            }
        });

        // ë©”ë‰´ ì„¤ëª…ë“¤
        const menuDescs = {
            'menu-character-desc-desktop': data.menu_character_desc_desktop,
            'menu-character-desc-mobile': data.menu_character_desc_mobile,
            'menu-persona-desc-desktop': data.menu_persona_desc_desktop,
            'menu-persona-desc-mobile': data.menu_persona_desc_mobile,
            'menu-revelations-desc-desktop': data.menu_revelations_desc_desktop,
            'menu-revelations-desc-mobile': data.menu_revelations_desc_mobile,
            'menu-tactic-desc-desktop': data.menu_tactic_desc_desktop,
            'menu-tactic-desc-mobile': data.menu_tactic_desc_mobile,
            'menu-article-desc-desktop': data.menu_article_desc_desktop,
            'menu-article-desc-mobile': data.menu_article_desc_mobile,
            'menu-tier-desc-desktop': data.menu_tier_desc_desktop,
            'menu-tier-desc-mobile': data.menu_tier_desc_mobile
        };

        Object.keys(menuDescs).forEach(id => {
            const element = document.getElementById(id);
            if (element && menuDescs[id]) {
                element.innerHTML = menuDescs[id];
            }
        });

        // ë²„íŠ¼ í…ìŠ¤íŠ¸ë“¤
        const buttons = {
            'menu-character-btn': data.menu_goto,
            'menu-persona-btn': data.menu_goto,
            'menu-revelations-btn': data.menu_goto,
            'menu-tactic-btn': data.menu_goto,
            'menu-article-btn': data.menu_goto,
            'menu-tier-btn': data.menu_goto
        };

        Object.keys(buttons).forEach(id => {
            const element = document.getElementById(id);
            if (element && buttons[id]) {
                element.textContent = buttons[id] + ' â†’';
            }
        });

        // ì„¹ì…˜ ì œëª©ë“¤
        const sectionTitles = {
            'popular-characters-title': data.popular_characters,
            'recent-updates-title': data.recent_updates,
            'guides-title': data.guides
        };

        Object.keys(sectionTitles).forEach(id => {
            const element = document.getElementById(id);
            if (element && sectionTitles[id]) {
                element.textContent = sectionTitles[id];
            }
        });

        // ê°€ì´ë“œ ì¹´ë“œ ì œëª©ë“¤
        const guideTitles = {
            'guide-city-title': data.guide_city,
            'guide-growth-title': data.guide_growth,
            'guide-battle-title': data.guide_battle
        };

        Object.keys(guideTitles).forEach(id => {
            const element = document.getElementById(id);
            if (element && guideTitles[id]) {
                element.textContent = guideTitles[id];
            }
        });

        // íƒí‹± ê´€ë ¨ í…ìŠ¤íŠ¸
        const tacticTitle = document.getElementById('tactic-workshop-title');
        if (tacticTitle && data.tactic_workshop) {
            tacticTitle.textContent = data.tactic_workshop;
        }

        /*
        const showMoreBtn = document.getElementById('show-more-posts-btn');
        if (showMoreBtn && data.show_more) {
            showMoreBtn.textContent = data.show_more + ' ï¼‹';
        }

        // ë”ë³´ê¸° ë²„íŠ¼
        
        const moreUpdatesBtn = document.getElementById('show-more-updates-btn');
        if (moreUpdatesBtn && data.show_more) {
            moreUpdatesBtn.textContent = data.show_more;
            moreUpdatesBtn.setAttribute('data-text-more', data.show_more);
        }*/

        // ëª¨ë“  ë§í¬ì— í˜„ì¬ ì–¸ì–´ íŒŒë¼ë¯¸í„° ì¶”ê°€
        updateLinksWithLanguage(currentLang);

        // ì–¸ì–´ë³„ ë©”ë‰´ ì œí•œ
        if (currentLang === 'en' || currentLang === 'jp') {
            // Persona ë©”ë‰´ í™œì„±í™” (ì˜¤ë²„ë ˆì´ ì œê±°)
            removeComingSoonOverlay('menu-persona-card');
            removeComingSoonOverlay('menu-revelations-card');
            removeComingSoonOverlay('menu-tactic-card');

            // ì˜¤ë²„ë ˆì´ ì¶”ê°€ ì˜ˆì‹œ
            // const tacticOverlayText = currentLang === 'en' ? 'Coming Soon' : 'æº–å‚™ä¸­';
            // addComingSoonOverlay('menu-tactic-card', tacticOverlayText);

            // main-content ì•„ë˜ ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            const middleContainer = document.querySelector('.middle-container');
            const guidesContainer = document.querySelector('.guides-container');

            if (middleContainer) {
                middleContainer.style.display = 'none';
            }
            if (guidesContainer) {
                guidesContainer.style.display = 'none';
            }

        } else {
            // í•œêµ­ì–´ì¸ ê²½ìš° ëª¨ë“  ë©”ë‰´ í™œì„±í™”
            const tacticCard = document.getElementById('menu-tactic-card');
            if (tacticCard) {
                tacticCard.style.display = 'block';
            }

            // ì˜¤ë²„ë ˆì´ ì œê±°
            removeComingSoonOverlay('menu-persona-card');
            removeComingSoonOverlay('menu-revelations-card');
            removeComingSoonOverlay('menu-tactic-card');

            // íƒí‹± ë„ì„œê´€ ì„¹ì…˜ í‘œì‹œ
            const postsContainer = document.getElementById('posts-container');
            if (postsContainer) {
                postsContainer.style.display = 'block';
                // ì˜¤ë²„ë ˆì´ ì œê±°
                const overlay = postsContainer.querySelector('.coming-soon-overlay');
                if (overlay) {
                    overlay.remove();
                }
                // ë§í¬ í™œì„±í™”
                const links = postsContainer.querySelectorAll('a');
                links.forEach(link => {
                    link.style.pointerEvents = 'auto';
                });
            }

            // main-content ì•„ë˜ ëª¨ë“  ì„¹ì…˜ í‘œì‹œ
            const middleContainer = document.querySelector('.middle-container');
            const guidesContainer = document.querySelector('.guides-container');

            if (middleContainer) {
                middleContainer.style.display = 'grid';
            }
            if (guidesContainer) {
                guidesContainer.style.display = 'block';
            }
        }
    }

    // ì–¸ì–´ë³„ SEO ì„¤ì • í•¨ìˆ˜
    function updateSEOContent() {
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì§ì ‘ ì–¸ì–´ í™•ì¸ (ìš°ì„ ìˆœìœ„)
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');

        let currentLang = 'kr'; // ê¸°ë³¸ê°’

        if (urlLang && ['kr', 'en', 'jp', 'cn'].includes(urlLang)) {
            currentLang = urlLang;
        } else if (typeof LanguageRouter !== 'undefined') {
            currentLang = LanguageRouter.getCurrentLanguage();
        } else {
            // localStorageì—ì„œ í™•ì¸
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && ['kr', 'en', 'jp', 'cn'].includes(savedLang)) {
                currentLang = savedLang;
            }
        }

        const seoData = {
            'kr': {
                title: 'í˜ë¥´ì†Œë‚˜5 ë” íŒ¬í…€ X - ë£¨í˜ë¥´ë„·',
                description: 'í˜ë¥´ì†Œë‚˜5 ë” íŒ¬í…€ Xì˜ ëª¨ë“  ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ í™•ì¸í•˜ì„¸ìš”. ìºë¦­í„°, í˜ë¥´ì†Œë‚˜, ìŠ¤í‚¬, ê³µëµ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.'
            },
            'en': {
                title: 'Persona 5: The Phantom X - LufelNet',
                description: 'Comprehensive guide for Persona 5: The Phantom X. Wiki, Characters, Personas, skills, and strategy guides all in one place.'
            },
            'jp': {
                title: 'ãƒšãƒ«ã‚½ãƒŠ5 ã‚¶ãƒ»ãƒ•ã‚¡ãƒ³ãƒˆãƒ  X - LufelNet',
                description: 'ãƒšãƒ«ã‚½ãƒŠ5 ã‚¶ãƒ»ãƒ•ã‚¡ãƒ³ãƒˆãƒ  Xã®ç·åˆæ”»ç•¥ã‚µã‚¤ãƒˆã€‚æ€ªç›—ã€ãƒšãƒ«ã‚½ãƒŠã€ã‚¹ã‚­ãƒ«ã€æˆ¦ç•¥ã‚¬ã‚¤ãƒ‰ã‚’ä¸€ç®‡æ‰€ã§ç¢ºèªã§ãã¾ã™ã€‚'
            }
        };

        const currentSEO = seoData[currentLang] || seoData['kr'];

        // íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
        document.title = currentSEO.title;

        // ë©”íƒ€ íƒœê·¸ ì—…ë°ì´íŠ¸
        const metaDescription = document.querySelector('meta[name="description"]');
        const ogTitle = document.querySelector('meta[property="og:title"]');
        const ogDescription = document.querySelector('meta[property="og:description"]');

        if (metaDescription) metaDescription.setAttribute('content', currentSEO.description);
        if (ogTitle) ogTitle.setAttribute('content', currentSEO.title);
        if (ogDescription) ogDescription.setAttribute('content', currentSEO.description);
    }

    // ì²« ë°©ë¬¸ì ì–¸ì–´ ê°ì§€ í•¨ìˆ˜
    async function checkAndDetectLanguage() {
        const hasLanguagePreference = localStorage.getItem('preferredLanguage');
        const hasLanguageDetected = localStorage.getItem('languageDetected');
        const urlParams = new URLSearchParams(window.location.search);
        const hasUrlLang = urlParams.get('lang');

        // ì²« ë°©ë¬¸ìì´ê³  ì–¸ì–´ ì„¤ì •ì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ ê°ì§€
        if (!hasLanguagePreference && !hasLanguageDetected && !hasUrlLang) {
            //console.log('ğŸ‘‹ ì²« ë°©ë¬¸ì ê°ì§€, IP ê¸°ë°˜ ì–¸ì–´ ì„¤ì • ì‹œì‘...');

            try {
                const apis = [
                    'https://ipapi.co/json/',
                    'https://ipinfo.io/json'
                ];

                let detectedLang = 'kr'; // ê¸°ë³¸ê°’

                for (const api of apis) {
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 3000);

                        const response = await fetch(api, { signal: controller.signal });
                        clearTimeout(timeoutId);

                        if (response.ok) {
                            const data = await response.json();
                            const countryCode = data.country_code || data.country;

                            //console.log(`ğŸŒ ê°ì§€ëœ êµ­ê°€: ${countryCode}`);

                            if (countryCode === 'KR') {
                                detectedLang = 'kr';
                                //console.log('ğŸ‡°ğŸ‡· í•œêµ­ ì‚¬ìš©ì ê°ì§€');
                            } else if (countryCode === 'JP') {
                                detectedLang = 'jp';
                                //console.log('ğŸ‡¯ğŸ‡µ ì¼ë³¸ ì‚¬ìš©ì ê°ì§€');
                            } else {
                                detectedLang = 'en';
                                //console.log('ğŸŒ í•´ì™¸ ì‚¬ìš©ì ê°ì§€');
                            }

                            break; // ì²« ë²ˆì§¸ ì„±ê³µí•œ APIë¡œ ê²°ì •
                        }
                    } catch (error) {
                        //console.log(`âŒ ${api} ì‹¤íŒ¨:`, error.message);
                        continue;
                    }
                }

                // ì–¸ì–´ ì„¤ì • ì €ì¥
                localStorage.setItem('preferredLanguage', detectedLang);
                localStorage.setItem('languageDetected', 'true');

                //console.log(`âœ… ê°ì§€ëœ ì–¸ì–´: ${detectedLang}`);

                // í•œêµ­ì–´ê°€ ì•„ë‹Œ ê²½ìš° ë¦¬ë‹¤ì´ë ‰íŠ¸
                if (detectedLang !== 'kr') {
                    //console.log(`ğŸ”„ ${detectedLang} ì–¸ì–´ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸...`);
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', detectedLang);
                    window.location.replace(newUrl.toString());
                    return;
                }

            } catch (error) {
                //console.log('âŒ ì–¸ì–´ ê°ì§€ ì‹¤íŒ¨:', error);
                // í´ë°±: ë¸Œë¼ìš°ì € ì–¸ì–´ í™•ì¸
                const browserLang = navigator.language.toLowerCase();
                let fallbackLang = 'kr';

                if (browserLang.startsWith('ja')) {
                    fallbackLang = 'jp';
                } else if (browserLang.startsWith('en')) {
                    fallbackLang = 'en';
                }

                localStorage.setItem('preferredLanguage', fallbackLang);
                localStorage.setItem('languageDetected', 'true');

                if (fallbackLang !== 'kr') {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', fallbackLang);
                    window.location.replace(newUrl.toString());
                }
            }
        }
    }

    document.addEventListener('DOMContentLoaded', async () => {
        Navigation.load('home');
        VersionChecker.check();

        // ì²« ë°©ë¬¸ì ì–¸ì–´ ê°ì§€ (í™ˆí˜ì´ì§€ì—ì„œë§Œ)
        await checkAndDetectLanguage();

        // ì–¸ì–´ ì½˜í…ì¸  ì—…ë°ì´íŠ¸ (ìš°ì„  ì‹¤í–‰)
        await updateLanguageContent();

        // SEO ì„¤ì • ì—…ë°ì´íŠ¸
        updateSEOContent();

        // í—¤ë”ì˜ ì–¸ì–´ ì„ íƒê¸° ì´ˆê¸°í™”
        const currentLang = getCurrentLanguage();
        const headerSelectedOption = document.querySelector('.header-container .selected-option');
        if (headerSelectedOption) {
            // í˜„ì¬ ì–¸ì–´ë¡œ ì„ íƒëœ ì˜µì…˜ ì—…ë°ì´íŠ¸
            const flagImg = headerSelectedOption.querySelector('.flag-icon');
            const langText = headerSelectedOption.querySelector('span');
            if (flagImg) flagImg.src = `${BASE_URL}/assets/img/flags/${currentLang}.png`;
            if (langText) {
                langText.textContent = currentLang === 'kr' ? 'í•œêµ­ì–´' :
                    currentLang === 'en' ? 'English' :
                        currentLang === 'jp' ? 'æ—¥æœ¬èª' : 'ä¸­æ–‡';
            }

            // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            headerSelectedOption.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const optionsContainer = headerSelectedOption.nextElementSibling;
                if (optionsContainer) {
                    optionsContainer.classList.toggle('active');
                }
            });
        }

        // í—¤ë”ì˜ ì–¸ì–´ ì˜µì…˜ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.querySelectorAll('.header-container .option').forEach(option => {
            option.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();

                if (this.classList.contains('disabled')) {
                    return;
                }

                const lang = this.getAttribute('data-value');
                Navigation.selectLanguage(lang, e);
            });
        });

        // ì–¸ì–´ ë¼ìš°í„° ì´ˆê¸°í™”
        if (typeof LanguageRouter !== 'undefined') {
            LanguageRouter.init().then(async () => {
                // ì–¸ì–´ ë¼ìš°í„° ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í•œ ë²ˆ ì—…ë°ì´íŠ¸
                await updateLanguageContent();
                updateSEOContent();
            });
        }

        // í™ˆ íƒí‹± ë¯¸ë¦¬ë³´ê¸°: tactic-posts-home.jsì˜ ê³µìš© í•¨ìˆ˜ë¡œ ì¼ì›í™”
        const urlParams = new URLSearchParams(window.location.search);
        const currentLangFromUrl = urlParams.get('lang') || (typeof LanguageRouter !== 'undefined' ? LanguageRouter.getCurrentLanguage() : 'kr');
        if (typeof window.loadHomeTacticsFromSupabase === 'function') {
            window.loadHomeTacticsFromSupabase(currentLangFromUrl);
        }

        // í´ë¦­ ì´ë²¤íŠ¸ ê°ì§€í•˜ì—¬ ì–¸ì–´ ì„ íƒê¸° ë‹«ê¸°
        document.addEventListener('click', (e) => {
            const optionsContainers = document.querySelectorAll('.options-container');
            optionsContainers.forEach(container => {
                if (!container.contains(e.target) &&
                    !e.target.closest('.selected-option')) {
                    container.classList.remove('active');
                }
            });
        });
    });

    // í˜ì´ì§€ ì™„ì „ ë¡œë“œ í›„ ìµœì¢… ì–¸ì–´ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
    window.addEventListener('load', async () => {
        // ì•½ê°„ì˜ ì§€ì—° í›„ ìµœì¢… ì—…ë°ì´íŠ¸ (ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ í›„)
        setTimeout(async () => {
            await updateLanguageContent();
            updateSEOContent();
            //console.log('ğŸ”„ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì–¸ì–´ ì½˜í…ì¸  ìµœì¢… ì—…ë°ì´íŠ¸');
        }, 100);


        // ê´‘ê³  í° ë°•ìŠ¤ ìˆ¨ê¹€
        /*
        setTimeout(() => {
            document.querySelectorAll(".adsbygoogle").forEach(el => {
                const status = el.getAttribute("data-ad-status");
                const adslot = el.getAttribute("data-ad-slot");
                //console.log("google status", status);
                //console.log("google adslot", adslot);
                if (status === "unfilled" || el.querySelector("iframe") === null) {
                    el.style.display = "none";
                }
            });
        }, 2000); */ // ê´‘ê³  ë¡œë”© ê¸°ë‹¤ë ¸ë‹¤ê°€ 2ì´ˆ í›„ ê²€ì‚¬
    });

    // ìœ í‹¸
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
    function formatDate(date) {
        // detect current language: URL -> LanguageRouter -> localStorage -> 'kr'
        let lang = 'kr';
        try {
            const urlLang = new URLSearchParams(window.location.search).get('lang');
            if (urlLang) lang = urlLang.toLowerCase();
            else if (typeof LanguageRouter !== 'undefined' && LanguageRouter.getCurrentLanguage) {
                lang = (LanguageRouter.getCurrentLanguage() || 'kr').toLowerCase();
            } else {
                const saved = localStorage.getItem('preferredLanguage');
                if (saved) lang = saved.toLowerCase();
            }
        } catch (_) { }
        if (!['kr', 'en', 'jp'].includes(lang)) lang = 'kr';

        const now = new Date();
        const diff = now.getTime() - date.getTime();
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        if (days === 0) {
            const hours = Math.floor(diff / (1000 * 60 * 60));
            if (hours === 0) {
                const minutes = Math.floor(diff / (1000 * 60));
                if (lang === 'en') return `${minutes} min ago`;
                if (lang === 'jp') return `${minutes}åˆ†å‰`;
                return `${minutes}ë¶„ ì „`;
            }
            if (lang === 'en') return `${hours} hours ago`;
            if (lang === 'jp') return `${hours}æ™‚é–“å‰`;
            return `${hours}ì‹œê°„ ì „`;
        } else if (days < 7) {
            if (lang === 'en') return `${days} days ago`;
            if (lang === 'jp') return `${days}æ—¥å‰`;
            return `${days}ì¼ ì „`;
        } else {
            const locale = lang === 'en' ? 'en-US' : (lang === 'jp' ? 'ja-JP' : 'ko-KR');
            return date.toLocaleDateString(locale);
        }
    }
</script>