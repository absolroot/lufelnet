---
layout: default
custom_css: [home, tactic-posts]
custom_js: [tactic-posts-home, tactic-preview, /tactic/share]
custom_data: [/characters/characters.js, /revelations/revelations.js]
permalink: /kr/
language: kr
---

    <div class="main-wrapper">
        <!-- Header (logo, etc.) -->
        <div class="header-container">
            <h1>P5X 루페르넷</h1> <span class="beta-text"></span>
            <button class="music-control" id="musicControl">
                <img src="{{ site.baseurl }}/assets/img/ui/music-off.png" alt="음악 재생" id="musicIcon">
            </button>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <div class="menu-cards">
                <div class="menu-card">
                    <a href="./character/?v=' + APP_VERSION" class="card-content" style="text-decoration: none; color: inherit;">
                        <div class="text-section">
                            <h2>괴도 <img src="{{ site.baseurl }}/assets/img/home/icon1.png" alt="괴도 아이콘" class="title-icon"></h2>
                            <p class="desktop-description">보다 높은 점수, 보다 쉬운 클리어를 위한<br>괴도별 육성 전략을 만나보세요</p>
                            <p class="mobile-description">괴도별 육성 전략을 만나보세요</p>
                            <button class="view-more">바로가기 →</button>
                        </div>
                        <img src="{{ site.baseurl }}/assets/img/home/1.webp" alt="괴도 일러스트" class="card-illustration" loading="lazy">
                    </a>
                </div>
                
                <div class="menu-card">
                    <a href="./persona/?v=' + APP_VERSION" class="card-content" style="text-decoration: none; color: inherit;">
                        <div class="text-section">
                            <h2>페르소나 <img src="{{ site.baseurl }}/assets/img/home/icon2.png" alt="페르소나 아이콘" class="title-icon"></h2>
                            <p class="desktop-description">핵심 페르소나 추천과 더불어<br>각 페르소나에 어울리는 스킬 세팅까지</p>
                            <p class="mobile-description">핵심 페르소나 추천과 스킬 세팅까지</p>
                            <button class="view-more">바로가기 →</button>
                        </div>
                        <img src="{{ site.baseurl }}/assets/img/home/2.webp" alt="페르소나 일러스트" class="card-illustration" loading="lazy">
                    </a>
                </div>

                <div class="menu-card">
                    <a href="./revelations/?v=' + APP_VERSION" class="card-content" style="text-decoration: none; color: inherit;">
                        <div class="text-section">
                            <h2>계시 <img src="{{ site.baseurl }}/assets/img/home/icon3.png" alt="계시 아이콘" class="title-icon"></h2>
                            <p class="desktop-description">계시 정보들을 한 눈에!<br>속성별, 일월성진별 원하는 대로 매칭</p>
                            <p class="mobile-description">계시 정보들을 한 눈에!</p>
                            <button class="view-more">바로가기 →</button>
                        </div>
                        <img src="{{ site.baseurl }}/assets/img/home/3.webp" alt="계시 일러스트" class="card-illustration" loading="lazy">
                    </a>
                </div>

                <div class="menu-card">
                    <a href="./tactic/tactic-share.html?v=' + APP_VERSION" class="card-content" style="text-decoration: none; color: inherit;">
                        <div class="text-section">
                            <h2>택틱 <img src="{{ site.baseurl }}/assets/img/home/icon4.png" alt="택틱 아이콘" class="title-icon"></h2>
                            <p class="desktop-description">본인만의 택틱을 만들고 공유하고,<br>바다와 흉몽에서 높은 점수를 쟁취하세요</p>
                            <p class="mobile-description">본인만의 택틱을 만들고 공유하세요</p>
                            <button class="view-more">바로가기 →</button>
                        </div>
                        <img src="{{ site.baseurl }}/assets/img/home/4.webp" alt="택틱 일러스트" class="card-illustration" loading="lazy">
                    </a>
                </div>
            </div>
            <div class="update-notice">
                
            </div>
        </div>
        <div class="separator-line"></div>
        <div class="middle-container">
            <div class="popular-content">
                <h2>인기 괴도</h2>
                <div class="character-cards">
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=사나다&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/사나다.webp" alt="사나다"></a></div>
                        <div class="character-card-text"><p>사나다 아키히코</p></div>
                    </div>
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=유카리&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/유카리.webp" alt="유카리"></a></div>
                        <div class="character-card-text"><p>타케바 유카리</p></div>
                    </div>
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=유키 마코토&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/유키 마코토.webp" alt="유키 마코토"></a></div>
                        <div class="character-card-text"><p>유키 마코토</p></div>
                    </div>
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=마나카&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/마나카.webp" alt="마나카"></a></div>
                        <div class="character-card-text"><p>나가오 마나카</p></div>
                    </div>
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=마유미&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/마유미.webp" alt="마유미"></a></div>
                        <div class="character-card-text"><p>하시모토 마유미</p></div>
                    </div>
                    <div class="character-card">
                        <div class="character-card-img"><a href="./character/character.html?name=야오링·사자무&v=' + APP_VERSION" style="text-decoration: none; color: inherit;"><img src="{{ site.baseurl }}/assets/img/tier/야오링·사자무.webp" alt="야오링·사자무"></a></div>
                        <div class="character-card-text"><p>야오링·사자무</p></div>
                    </div>
                </div>
            </div>
            <div class="recent-update-content">
                <h2>최신 업데이트</h2>
                <div id="recent-update-list"></div>
                <button id="show-more-updates-btn" class="show-more-updates-btn" style="display: none;">더보기</button>
            </div>
        </div>
        <div class="guides-container">
            <h2>가이드</h2>
            <div class="guide-cards">
                <div class="guide-card">
                    <div class="guide-card-header">
                        <img src="{{ site.baseurl }}/assets/img/home/guide1.png" alt="가이드 이미지">
                        <h3>도시 생활</h3>
                    </div>
                    <div class="guide-card-content">
                        <div class="article"><a href="https://docs.google.com/spreadsheets/d/1L47W0r5nHpAlU_qUY3HuslcqBRS78tHC682eFCXiftM" target="_blank" style="text-decoration: none; color: inherit;">∘ 협력자 선물 & 선택지</a></div>
                        <div class="article"><a href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=158597" target="_blank" style="text-decoration: none; color: inherit;">∘ 협력자 우선순위 추천</a></div>
                        <div class="article"><a href="https://arca.live/b/persona5x/112002828" target="_blank" style="text-decoration: none; color: inherit;">∘ 이치가야 낚시</a></div>
                        <div class="article"><a href="https://arca.live/b/persona5x/110240842" target="_blank" style="text-decoration: none; color: inherit;">∘ 요리 레시피 획득</a></div>
                    </div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header">
                        <img src="{{ site.baseurl }}/assets/img/home/guide2.png" alt="가이드 이미지">
                        <h3>육성 및 재화</h3>
                    </div>
                    <div class="guide-card-content">
                        <div class="article"><a href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=170601" target="_blank" style="text-decoration: none; color: inherit;">∘ 계시에 대하여</a></div>
                        <div class="article"><a href="https://arca.live/b/persona5x/115843217" target="_blank" style="text-decoration: none; color: inherit;">∘ 주 성위 계시 입수처</a></div>
                        <div class="article"><a href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=175353" target="_blank" style="text-decoration: none; color: inherit;">∘ 교환상점 구매목록</a></div>
                        <div class="article"><a href="https://lufel.net/kr/pay-calc" target="_blank" style="text-decoration: none; color: inherit;">∘ 패키지 과금효율 계산</a></div>
                    </div>
                </div>
                <div class="guide-card">
                    <div class="guide-card-header">
                        <img src="{{ site.baseurl }}/assets/img/home/guide3.png" alt="가이드 이미지">
                        <h3>전투 및 팰리스</h3>
                    </div>
                    <div class="guide-card-content">
                        <!-- <div class="article"><a href="https://gall.dcinside.com/mgallery/board/view/?id=persona5phantomx&no=163337" target="_blank" style="text-decoration: none; color: inherit;">∘ 대미지 계산식</a></div> -->
                        <div class="article"><a href="https://www.bilibili.com/video/BV1xF4m1N7bZ" target="_blank" style="text-decoration: none; color: inherit;">∘ 팰리스 1장 100% 탐색도</a></div>
                        <div class="article"><a href="https://www.bilibili.com/video/BV1zD421n7jJ" target="_blank" style="text-decoration: none; color: inherit;">∘ 팰리스 2장 100% 탐색도</a></div>
                        <div class="article"><a href="https://www.bilibili.com/video/BV1kr421T7Wp" target="_blank" style="text-decoration: none; color: inherit;">∘ 팰리스 3장 100% 탐색도</a></div>
                        <div class="article"><a href="https://www.bilibili.com/video/BV1duUSYfEdY" target="_blank" style="text-decoration: none; color: inherit;">∘ 팰리스 4장 100% 탐색도</a></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="posts-container">
            <div class="posts-header">
                <h2><a href="./tactic/tactic-share.html" style="text-decoration: none; color: inherit;">택틱 대장간 NEW</a></h2>
                <a href="./tactic/tactic-share.html" class="show-more-posts-btn" style="text-decoration: none; color: inherit;">더보기 ＋</a>
            </div>
            <div class="posts-list" id="postsList"></div>
        </div>

    </div>
    
</div>

<!-- iframe -->
<iframe id="music-player" src="{{ site.baseurl }}/music.html" style="display: none;"></iframe>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        Navigation.load('home');
        VersionChecker.check();
        window.tacticShare = new TacticShare({ postsPerPage: 2});

        const musicPlayer = document.getElementById('music-player');
        const musicControl = document.getElementById('musicControl');
        const musicIcon = document.getElementById('musicIcon');
        let isPlaying = false;

        // Music control button click event
        musicControl.addEventListener('click', () => {
            if (!isPlaying) {
                musicPlayer.contentWindow.postMessage('play', '*');
                musicIcon.src = '{{ site.baseurl }}/assets/img/ui/music-on.png';
                musicIcon.alt = '음악 중지';
            } else {
                musicPlayer.contentWindow.postMessage('pause', '*');
                musicIcon.src = '{{ site.baseurl }}/assets/img/ui/music-off.png';
                musicIcon.alt = '음악 재생';
            }
            isPlaying = !isPlaying;
        });

        // Receive music state
        window.addEventListener('message', (event) => {
            if (event.data === 'playing' || event.data === 'paused') {
                sessionStorage.setItem('musicState', event.data);
                isPlaying = event.data === 'playing';
                musicIcon.src = isPlaying ? '{{ site.baseurl }}/assets/img/ui/music-on.png' : '{{ site.baseurl }}/assets/img/ui/music-off.png';
                musicIcon.alt = isPlaying ? '음악 중지' : '음악 재생';
            }
        });

        // Save current state before page unload
        window.addEventListener('beforeunload', () => {
            sessionStorage.setItem('musicState', isPlaying ? 'playing' : 'paused');
        });
    });

    // Load update history
    let allUpdates = []; // Store all updates
    const MAX_TOTAL_LINES = 6; // 전체 표시할 최대 줄 수
    const LOAD_MORE_COUNT = 10; // Number of updates to load when "more" button is clicked
    let currentlyShown = 0;

    async function loadUpdates() {
        try {
            const response = await fetch(`{{ site.baseurl }}/data/kr/updates.csv?v=${APP_VERSION}`);
            const data = await response.text();
            
            // Parse CSV
            allUpdates = data.split('\n')
                .slice(1) // Remove header
                .filter(line => line.trim()) // Remove empty lines
                .map(line => {
                    const [date, version, content] = line.split(',');
                    // Remove '20' prefix from date
                    const formattedDate = date.replace(/^20/, '');
                    return { date: formattedDate, version, content: content.replace('|', ', ') };
                });

            // Show initial updates
            showMoreUpdates();
            
            // Set visibility of "more" button
            const showMoreBtn = document.getElementById('show-more-updates-btn');
            showMoreBtn.style.display = 'block';
            showMoreBtn.addEventListener('click', () => {
                showMoreBtn.style.display = 'none';
                showAllUpdates();
            });
        } catch (error) {
            console.error('Failed to load update history:', error);
        }
    }

    // 모든 업데이트를 표시하는 함수
    function showAllUpdates() {
        const updateList = document.getElementById('recent-update-list');
        updateList.innerHTML = ''; // 기존 내용 초기화
        
        allUpdates.forEach(update => {
            const updateElement = document.createElement('div');
            updateElement.className = 'recent-update-content-text';
            
            const contentLines = update.content.split('\\n').join('<br>');
            
            updateElement.innerHTML = `
                <div class="date">${update.date}</div>
                <div class="version">${update.version}</div>
                <div class="content"><p>${contentLines}</p></div>
            `;
            updateList.appendChild(updateElement);
        });
    }

    // 초기 5줄만 표시하는 함수
    function showMoreUpdates() {
        const updateList = document.getElementById('recent-update-list');
        let totalLines = 0;
        let updatesShown = 0;
        
        for (const update of allUpdates) {
            const lines = update.content.split('\\n');
            
            if (totalLines + lines.length > MAX_TOTAL_LINES) {
                // 남은 줄 수 계산
                const remainingLines = MAX_TOTAL_LINES - totalLines;
                if (remainingLines > 0) {
                    const updateElement = document.createElement('div');
                    updateElement.className = 'recent-update-content-text';
                    
                    const visibleContent = lines.slice(0, remainingLines).join('<br>');
                    
                    updateElement.innerHTML = `
                        <div class="date">${update.date}</div>
                        <div class="version">${update.version}</div>
                        <div class="content"><p>${visibleContent} ...</p></div>
                    `;
                    updateList.appendChild(updateElement);
                }
                break;
            }
            
            const updateElement = document.createElement('div');
            updateElement.className = 'recent-update-content-text';
            
            updateElement.innerHTML = `
                <div class="date">${update.date}</div>
                <div class="version">${update.version}</div>
                <div class="content"><p>${lines.join('<br>')}</p></div>
            `;
            updateList.appendChild(updateElement);
            
            totalLines += lines.length;
            updatesShown++;
            
            if (totalLines >= MAX_TOTAL_LINES) break;
        }
    }

    // Load update history on page load
    document.addEventListener('DOMContentLoaded', loadUpdates);
</script>
