<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-adsense-account" content="ca-pub-5862324369257695">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5862324369257695" crossorigin="anonymous"></script> 
  
  
  <!-- 광고 차단 감지 스타일 -->
  <!--
  <style>
    #adblock-notice {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }
    
    .adblock-notice-content {
      background: #1a1a1a;
      padding: 30px;
      border-radius: 12px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      color: #fff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .adblock-notice-content h2 {
      margin: 0 0 20px 0;
      color: #fff;
      font-size: 1.5em;
    }
    
    .adblock-notice-content p {
      margin: 0 0 20px 0;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .adblock-notice-content button {
      background: #e60012;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s;
    }
    
    .adblock-notice-content button:hover {
      background: #ff1a1a;
    }

    .adblock-notice-content .refresh-notice {
      margin-top: 15px;
      font-size: 0.9em;
      color: rgba(255, 255, 255, 0.6);
    }

    body.adblock-detected {
      overflow: hidden;
    }

    .container.blurred {
      filter: blur(5px);
      pointer-events: none;
      user-select: none;
    }
  </style>
  -->
  
  <!-- 지역별 메타태그 동적 생성 스크립트 -->
  <script src="{{ site.baseurl }}/assets/js/geo-meta.js?v={{ site.time | date: '%s' }}" defer></script>
  
  <!-- canonical URL -->
  {% assign current_url = page.url | replace:'index.html','' | replace:'.html','' %}
  {% assign query_string = page.url | split:'?' | last %}
  {% assign canonical_params = '' %}

  {% if query_string contains 'data=' or query_string contains 'name=' %}
    {% assign params = query_string | split:'&' %}
    {% for param in params %}
      {% if param contains 'data=' or param contains 'name=' %}
        {% if canonical_params == '' %}
          {% assign canonical_params = '?' | append: param %}
        {% else %}
          {% assign canonical_params = canonical_params | append: '&' | append: param %}
        {% endif %}
      {% endif %}
    {% endfor %}
  {% endif %}

  <link rel="canonical" href="{{ site.url }}{{ current_url }}{{ canonical_params }}" />
  

  
  <!-- 기본 메타태그 (JavaScript로 동적 업데이트됨) -->
  <meta name="description" content="페르소나 5X 공략 및 정보 사이트">
  <meta name="keywords" content="P5X, 페르소나5X, 공략, 괴도, 페르소나, 계시">
  <meta name="author" content="LufelNet">
  
  <!-- Open Graph 메타태그 (JavaScript로 동적 업데이트됨) -->
  <meta property="og:title" content="P5X 루페르넷">
  <meta property="og:description" content="페르소나 5X 공략 및 정보 사이트">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ site.url }}{{ current_url }}{{ canonical_params }}">
  <meta property="og:image" content="{{ site.url }}{{ site.baseurl }}/assets/img/home/seo.png">
  <meta property="og:site_name" content="P5X 루페르넷">
  <meta property="og:locale" content="ko_KR">
  
  <!-- Twitter 카드 메타태그 (JavaScript로 동적 업데이트됨) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="P5X 루페르넷">
  <meta name="twitter:description" content="페르소나 5X 공략 및 정보 사이트">
  <meta name="twitter:image" content="{{ site.url }}{{ site.baseurl }}/assets/img/home/seo.png">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>

  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-57DTGQ5TR7"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-57DTGQ5TR7');</script>
 
  
  <!-- 버전 관리 스크립트 -->
  <script>
    document.write('<script src="{{ site.baseurl }}/assets/js/version.js?v=' + new Date().getTime() + '"><\/script>');
  </script>
  
  <link rel="icon" type="image/x-icon" href="{{ site.baseurl }}/assets/img/favicon/favicon.ico">
  <link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/img/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="{{ site.baseurl }}/assets/img/favicon/favicon.svg" />
  <link rel="shortcut icon" href="{{ site.baseurl }}/assets/img/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}/assets/img/favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="LufelNet" />
  <link rel="manifest" href="{{ site.baseurl }}/assets/img/favicon/site.webmanifest" />
  
  <title>{% if page.title %}{{ page.title }}{% else %}P5X 루페르넷{% endif %}</title>
  


  <script>
    // APP_VERSION을 사용하여 리소스 버전 관리
    const BASE_URL = '{{ site.baseurl }}';
    
    // 기본 CSS 및 JS 파일 로드
    document.write('<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/default/common.css?v=' + APP_VERSION + '">');
    document.write('<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/default/nav.css?v=' + APP_VERSION + '">');
    document.write('<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/default/version-update.css?v=' + APP_VERSION + '">');
    document.write('<script src="{{ site.baseurl }}/assets/js/language-router.js?v=' + APP_VERSION + '"><\/script>');
    document.write('<script src="{{ site.baseurl }}/assets/js/nav.js?v=' + APP_VERSION + '"><\/script>');
    document.write('<script src="{{ site.baseurl }}/assets/js/top_button.js?v=' + APP_VERSION + '"><\/script>');
    
    // 페이지별 CSS 파일 로드
    {% if page.custom_css %}
      {% for css_file in page.custom_css %}
        document.write(`<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/{{ css_file }}.css?v=${APP_VERSION}">`);
      {% endfor %}
    {% endif %}
    
    // 페이지별 JS 파일 로드
    {% if page.custom_js %}
      {% for js_file in page.custom_js %}
        document.write(`<script src="{{ site.baseurl }}/assets/js/{{ js_file }}.js?v=${APP_VERSION}"><\/script>`);
      {% endfor %}
    {% endif %}
    
    // 페이지별 데이터 파일 로드 (기본 한국어, geo-meta.js에서 언어별 동적 로딩)
    {% if page.custom_data %}
      {% for data_file in page.custom_data %}
        document.write(`<script src="{{ site.baseurl }}/data/kr/{{ data_file }}?v=${APP_VERSION}"><\/script>`);
      {% endfor %}
    {% endif %}
  </script>
</head>
<body>
  <!-- 광고 차단 알림 -->
  <!--
  <div id="adblock-notice">
    <div class="adblock-notice-content">
      <h2>광고 차단이 감지되었습니다</h2>
      <p>루페르넷은 광고 수익으로 운영되는 무료 사이트입니다.<br>사이트를 이용하시려면 광고 차단을 해제해 주세요.</p>
      <button onclick="reloadPage()">새로고침</button>
      <p class="refresh-notice">광고 차단을 해제하신 후 새로고침을 눌러주세요.</p>
    </div>
  </div>
  -->

  <!-- 광고 차단 감지 스크립트 -->
  <!--
  <script>
    function detectAdblock() {
      let adBlockEnabled = false;
      
      // AdSense 스크립트 로드 실패 감지
      const adScript = document.createElement('script');
      adScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5862324369257695';
      adScript.async = true;
      adScript.onerror = function() {
        console.log('AdBlock detected: Script load failed');
        adBlockEnabled = true;
        showBlockedNotice();
      };
      document.head.appendChild(adScript);

      // 백업 감지 방법
      window.setTimeout(function() {
        // AdSense 객체 확인
        if (typeof adsbygoogle === 'undefined') {
          console.log('AdBlock detected: AdSense object undefined');
          adBlockEnabled = true;
        }

        // 테스트 광고 요소 확인
        const testAd = document.createElement('div');
        testAd.innerHTML = '&nbsp;';
        testAd.className = 'adsbygoogle';
        document.body.appendChild(testAd);

        if (testAd.offsetHeight === 0 || 
            testAd.clientHeight === 0 || 
            getComputedStyle(testAd).display === 'none' || 
            getComputedStyle(testAd).visibility === 'hidden') {
          console.log('AdBlock detected: Test ad element blocked');
          adBlockEnabled = true;
        }
        
        testAd.remove();

        // 추가 감지: ERR_BLOCKED_BY_CLIENT 에러 확인
        const testImg = new Image();
        testImg.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
        testImg.onerror = function(err) {
          if (err && err.target && err.target.error && err.target.error.message) {
            if (err.target.error.message.includes('ERR_BLOCKED_BY_CLIENT')) {
              console.log('AdBlock detected: ERR_BLOCKED_BY_CLIENT error');
              adBlockEnabled = true;
              showBlockedNotice();
            }
          }
        };

        if (adBlockEnabled) {
          showBlockedNotice();
        }
      }, 500);
    }

    function showBlockedNotice() {
      if (document.body.classList.contains('adblock-detected')) return;
      
      document.getElementById('adblock-notice').style.display = 'flex';
      document.body.classList.add('adblock-detected');
      document.querySelector('.container').classList.add('blurred');
      
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        console.log('Development environment detected, skipping adblock enforcement');
        return;
      }
    }

    function reloadPage() {
      window.location.reload();
    }

    window.addEventListener('load', function() {
      setTimeout(detectAdblock, 100);
    });
  </script>
  -->

  <!-- 네비게이션 컨테이너 -->
  <div class="container">
    <div id="nav-container"></div>
    
    <!-- 메인 콘텐츠 -->
    {{ content }}
    
    <!-- 푸터 
    <footer>
      <p>&copy; {{ site.time | date: '%Y' }} P5X 루페르넷</p>
    </footer>-->
    <button id="top-button" class="floating-top-btn">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4L4 12L5.4 13.4L11 7.8V20H13V7.8L18.6 13.4L20 12L12 4Z" fill="rgba(255, 255, 255, 0.6)"/>
      </svg>
    </button>
  </div>
  <div class="footer-container">
    <div class="footer-text">
        <p id="footer-disclaimer">{{ site.data.i18n[page.lang].footer_disclaimer }}</p>
        <p><span id="footer-contact">✉️ contact : superphil722@gmail.com　💬 <a href="https://discord.gg/x3fvdQtBVg" target="_blank" style="color: #fff; text-decoration: underline;">discord.gg/x3fvdQtBVg</a>　@{{ site.data.i18n[page.lang].footer_contact_name }}</span></p>
        <p></p>
    </div>
    
    <!-- 반응형 일반 -->
        <!--
    <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-5862324369257695"
            data-ad-slot="1387076195"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
    <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
    </script>-->
  </div>
</body>
</html>