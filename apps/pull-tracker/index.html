---
layout: default
permalink: /pull-tracker/
language: kr
title: "Pull Tracker - Persona 5: The Phantom X"
description: "P5X 가챠 Pull Tracker (URL 입력 후 서버에서 기록 조회)"
---

{% include supabase-config.html %}

<div class="main-wrapper">
    <div class="navigation-path">
        <script>document.write(`<a href="${BASE_URL}/?v=${APP_VERSION}"><span data-lang-key="home">홈</span></a>`);</script>
        <span class="separator">/</span>
        <span class="current-page" id="navCurrent">Pull Tracker</span>
    </div>

    <div class="header-container">
        <h1 id="pageTitle">Pull Tracker</h1>
    </div>

    <!-- User Bar -->
    <div id="ptUserBar" class="user-info-bar" style="display:none;">
        <span class="user-label" id="ptUserSignedAs">로그인:</span>
        <span id="ptUserName"></span>
        <button id="ptLoginBtn" class="auth-btn">로그인</button>
        <button id="ptLogoutBtn" class="auth-btn" style="display:none;">로그아웃</button>
    </div>

    <section class="card-style" style="padding:16px; position:relative;">
        <div style="display:flex; flex-direction:column; gap:12px; max-width:860px;">
            <label for="sourceUrl" id="inputLabel" style="font-weight:600; opacity:.9;">가챠 기록 URL</label>
            <div class="url-row">
                <input id="sourceUrl" type="url" inputmode="url" placeholder="https://..." class="url-input">
                <button id="startBtn" class="url-btn primary">가져오기</button>
                <button id="clearBtn" class="url-btn secondary">초기화</button>
            </div>
            <div id="info" class="url-info"></div>
            <div id="status" class="url-status"></div>
            <pre id="result" class="raw-response" style="display:none;"></pre>
        </div>
    </section>

    <!-- Overview Cards -->
    <section class="summary-cards" style="margin-top:16px;">
        <div id="overview" class="overview-grid"></div>
    </section>
    <div class="section-divider"></div>

    <!-- Stats Cards Controls -->
    <section class="summary-cards" style="margin-top:12px;">
        <label class="hide4-toggle"><input id="hide4Chk" type="checkbox" style="vertical-align:-2px; margin-right:6px;"> <span id="hide4Label">4★ 숨기기</span></label>
    </section>

    <!-- Stats Cards -->
    <section class="summary-cards" style="margin-top:8px;">
        <!--<h2 id="cardsTitle" style="margin:0 0 12px 0;">Stats (Last 90 Days)</h2>-->
        <div id="cards" class="cards-grid" data-example="{{ site.baseurl }}/apps/pull-tracker/example.json"></div>
    </section>

    <style>
        .card-style { background:#140d0a; border:1px solid rgba(255,255,255,.08); border-radius:12px; margin:0 20px;}
        .summary-cards { margin:0 20px;}
        @media (max-width: 1200px) {
            .card-style, .summary-cards { margin: 0px;}
            .header-container, .navigation-path { padding-left: 0px; padding-right: 0px;}
        }

        @media (max-width: 768px) { #result { min-height: 120px; } }
        .cards-grid { display:grid; grid-template-columns: repeat(3, minmax(220px,1fr)); gap:12px; }
        @media (max-width: 1200px) { .cards-grid { grid-template-columns: repeat(2, minmax(160px,1fr)); } }
        @media (max-width: 640px) { .cards-grid { grid-template-columns: 1fr; } }
        .stat-card { background:#0e0a08; border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:16px 16px 24px 16px; }
        .stat-card h3 { margin:0 0 0px 0; font-size:16px; }
        .stat { display:flex; justify-content:space-between; margin:4px 0; opacity:.95; font-size:14px; }
        .stat-table { width:100%; margin-top:6px; border-top:1px solid rgba(255,255,255,.08); }
        .stat-table .tr { display:grid; grid-template-columns: 1.2fr .8fr .8fr .8fr; gap:6px; padding:6px 0; border-bottom:1px solid rgba(255,255,255,.06); }
        .stat-table .th { opacity:.8; font-weight:600; font-size:12px; }
        .stat-table .td { font-size:13px; }
        .stat-table .star { font-weight:700; }
        .stat-table .tr .td:first-child { font-weight:700; }
        .stat-table .sub { opacity:.9; }
        .tr.five .td, .tr.five .star { color:#8fd9ff; }
        .tr.fifty .td { color:#8fd9ff; }
        .tr.four .td, .tr.four .star { color:#ffc17c; }
        .pills { display:flex; flex-wrap:wrap; gap:6px; margin-top:20px; }
        .pill { position:relative; background:#140d0a; border:1px solid rgba(255,255,255,.12); border-radius:999px; padding:4px 8px; font-size:12px; opacity:.95; }
        /* Fancy grade borders */
        .grade-5 { position: relative; border-radius:10px; }
        .grade-5::after { content:""; position:absolute; inset:0; padding:1px; border-radius:inherit; opacity:0.6; background: linear-gradient(45deg, #b1c0ec, #efefef, #c4ffff, #efefef, #e4c2d3, #efefef, #c6a9f9, #ba7f96, #efefef, #c4ffff); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none; background-size:150% auto; }
        .grade-4 { position: relative; border-radius:10px; }
        /* .grade-4::after { content:""; position:absolute; inset:0; padding:1px; border-radius:inherit; background:  #ffc17c; opacity:0.5; -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none; background-size:150% auto; }*/
        .h3-row { display:flex; align-items:center; gap:8px; margin-bottom: 12px; }
        .help-icon { position:relative; display:inline-flex; width:18px; height:18px; color:#fff; opacity:.8; cursor:help; }
        .help-icon svg { width:18px; height:18px; }
        .help-icon .help-tip { position:absolute; top:120%; right:0; white-space:nowrap; background:#181212; color:#fff; border:1px solid rgba(255,255,255,.4); border-radius:6px; padding:8px 10px; font-size:12px; opacity:0; pointer-events:none; transform:translateY(-4px); transition:opacity .15s ease, transform .15s ease; z-index:50; filter:none; backdrop-filter:none; }
        .help-icon:hover .help-tip { opacity:1; transform:translateY(0); }
        .pill { display:inline-flex; align-items:center; gap:6px; }
        .pill img { width:18px; height:18px; object-fit:cover; border-radius:50%; aspect-ratio:1/1; }
        /* five list */
        .five-list { margin-top:10px; display:flex; flex-direction:column; gap:6px; }
        .five-row { display:flex; align-items:center; justify-content:space-between; gap:8px; padding:6px 0; border-top:1px solid rgba(255,255,255,.06); }
        .five-left { display:inline-flex; align-items:center; gap:8px; font-size:12px;}
        .five-right { display:inline-flex; align-items:center; gap:12px; opacity:.85; font-size:12px; }
        details { margin-top:20px; background:#0c0806; border:1px solid rgba(255,255,255,.06); border-radius:8px; padding:6px 10px; }
        details > summary { cursor:pointer; list-style:none; font-size:13px; color: #ededed }
        details > summary::marker { display:none; }
        details > summary::before { content:'+'; display:inline-block; width:16px; margin-right:6px; opacity:.8; }
        details[open] > summary::before { content:'-'; }
        .card-title-icon { object-fit:cover; height:18px; }
        .inprogress { opacity:.7; font-size:12px; }
        /* URL row */
        .url-row { display:flex; gap:8px; align-items:center; }
        .url-input { flex:1; padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.18); background:#1a110e; color:#fff; outline:none; transition:border-color .15s ease; }
        .url-input:focus { border-color:#b38b6d; }
        .url-btn { padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.18); background:#231510; color:#fff; cursor:pointer; }
        .url-btn.primary { background:#4e2e20; border-color:#6d4a37; }
        .url-btn.primary:hover { background:#5a3727; }
        .url-btn.secondary:hover { background:#2a1a13; }
        .url-info { opacity:.85; font-size:14px; white-space:pre-line; }
        .url-status { line-height:1.6; font-size:14px; }

        /* Overview grid */
        .overview-grid { display:grid; grid-template-columns: repeat(3, minmax(220px,1fr)); gap:12px; }
        @media (max-width: 1200px) { .overview-grid { grid-template-columns: repeat(2, minmax(160px,1fr)); } }
        @media (max-width: 640px) { .overview-grid { grid-template-columns: 1fr; } }
        .overview-card { background:#0e0a08; border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:16px; }
        .overview-card h3 { margin:0 0 0px 0; font-size:16px; display:flex; align-items:center; gap:8px; }
        .overview-rows { display:grid; grid-template-columns: 1.4fr 1fr 1fr 1fr; gap:6px; margin-top:6px; }
        .overview-label { opacity:.85; font-size:12px; grid-column: 1 / -1; margin-top:6px; }
        .jewel { object-fit:cover; height:16px; vertical-align:-3px; margin-right:0px; }
        .overview-chart { width:100%; height:140px; display:block; margin-top:8px; }
        .section-divider { height:1px; background:rgba(255,255,255,.08); margin:16px 20px; }
        /* Loading overlay */
        /* minimal inline spinner */
        .spinner { width:16px; height:16px; border-radius:50%; border:2px solid rgba(255,255,255,.2); border-top-color:#fff; animation:spin 1s linear infinite; display:inline-block; }
        @keyframes spin { to { transform: rotate(360deg); } }
        /* Tooltip newline support */
        .cursor-tooltip { white-space: pre-line; }
        .tooltip-mobile-banner { white-space: pre-line; }
        /* DEBUG raw response */
        .raw-response { margin-top:8px; padding:10px; background:#0c0806; border:1px solid rgba(255,255,255,.12); color:#e8e8e8; border-radius:8px; max-height:260px; overflow:auto; white-space:pre-wrap; word-break:break-all; }
        .hide4-toggle { display:inline-block; font-size:12px; opacity:.9; }
        /* User bar */
        .user-info-bar { display:flex; align-items:center; gap:10px; margin:8px 20px 0px 20px; padding:8px 12px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); border-radius:8px; }
        .user-info-bar .user-label { color:rgba(255,255,255,0.85); }
        .auth-btn { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.35); padding:6px 10px; border-radius:6px; cursor:pointer; }
        .auth-btn:hover { background: rgba(255,255,255,0.08); }
    </style>

    <!-- modal loader removed; using inline spinner near status -->
    <script src="{{ site.baseurl }}/apps/pull-tracker/merge-engine.js?v={{ site.time | date: '%s' }}"></script>
    <script src="{{ site.baseurl }}/apps/pull-tracker/charts.js?v={{ site.time | date: '%s' }}"></script>
    <script src="{{ site.baseurl }}/apps/pull-tracker/pull-tracker.js?v={{ site.time | date: '%s' }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.Navigation && typeof Navigation.load === 'function') {
                try { Navigation.load('pull-tracker'); } catch(_) {}
            }
            // expose base url to JS
            try { window.BASE_URL = '{{ site.baseurl }}'; } catch(_) {}
            // init auth bar once
            try { if (window.pullTrackerInitAuth) window.pullTrackerInitAuth(); } catch(_) {}
        });
    </script>
</div>


